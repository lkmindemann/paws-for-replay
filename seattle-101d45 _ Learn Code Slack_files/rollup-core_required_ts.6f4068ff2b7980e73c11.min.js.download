(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[420,38],{101:function(e,t,n){var r=n(109)("keys");var o=n(91);e.exports=function(e){return r[e]||(r[e]=o(e))}},109:function(e,t,n){var r=n(46);var o="__core-js_shared__";var a=r[o]||(r[o]={});e.exports=function(e){return a[e]||(a[e]={})}},110:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},111:function(e,t){t.f={}.propertyIsEnumerable},114:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},115:function(e,t,n){var r=n(68);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},119:function(e,t,n){var r=n(58).f;var o=n(60);var a=n(43)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:true,value:t})}},120:function(e,t,n){var r=n(96);e.exports=function(e){return Object(r(e))}},125:function(e,t,n){"use strict";var r=n(208)(true);n(155)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t;var t=this._i;var n;if(t>=e.length)return{value:void 0,done:true};n=r(e,t);this._i+=n.length;return{value:n,done:false}})},126:function(e,t,n){var r=n(68);var o=n(46).document;var a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},127:function(e,t){e.exports=true},132:function(e,t){t.f=Object.getOwnPropertySymbols},133:function(e,t,n){var r=n(114);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},136:function(e,t,n){e.exports=!n(56)&&!n(73)(function(){return 7!=Object.defineProperty(n(126)("div"),"a",{get:function(){return 7}}).a})},137:function(e,t,n){var r=n(60);var o=n(66);var a=n(182)(false);var i=n(101)("IE_PROTO");e.exports=function(e,t){var n=o(e);var s=0;var l=[];var c;for(c in n)c!=i&&r(n,c)&&l.push(c);while(t.length>s)r(n,c=t[s++])&&(~a(l,c)||l.push(c));return l}},146:function(e,t,n){var r=n(181);e.exports=function(e,t,n){r(e);if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},148:function(e,t,n){n(220);var r=n(46);var o=n(64);var a=n(80);var i=n(43)("toStringTag");var s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(var l=0;l<s.length;l++){var c=s[l];var _=r[c];var u=_&&_.prototype;u&&!u[i]&&o(u,i,c);a[c]=a.Array}},154:function(e,t,n){var r=n(95);var o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},155:function(e,t,n){"use strict";var r=n(127);var o=n(86);var a=n(168);var i=n(64);var s=n(60);var l=n(80);var c=n(209);var _=n(119);var u=n(205);var d=n(43)("iterator");var f=!([].keys&&"next"in[].keys());var m="@@iterator";var p="keys";var g="values";var S=function(){return this};e.exports=function(e,t,n,h,T,v,b){c(n,t,h);var w=function(e){if(!f&&e in x)return x[e];switch(e){case p:return function t(){return new n(this,e)};case g:return function t(){return new n(this,e)}}return function t(){return new n(this,e)}};var y=t+" Iterator";var k=T==g;var j=false;var x=e.prototype;var O=x[d]||x[m]||T&&x[T];var E=!f&&O||w(T);var C=T?k?w("entries"):E:void 0;var M="Array"==t&&x.entries||O;var A,L,F;if(M){F=u(M.call(new e));if(F!==Object.prototype&&F.next){_(F,y,true);r||s(F,d)||i(F,d,S)}}if(k&&O&&O.name!==g){j=true;E=function e(){return O.call(this)}}r&&!b||!f&&!j&&x[d]||i(x,d,E);l[t]=E;l[y]=S;if(T){A={values:k?E:w(g),keys:v?E:w(p),entries:C};if(b)for(L in A)L in x||a(x,L,A[L]);else o(o.P+o.F*(f||j),t,A)}return A}},156:function(e,t,n){t.f=n(43)},157:function(e,t,n){var r=n(46);var o=n(52);var a=n(127);var i=n(156);var s=n(58).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},163:function(e,t,n){var r=n(71);var o=n(204);var a=n(110);var i=n(101)("IE_PROTO");var s=function(){};var l="prototype";var c=function(){var e=n(126)("iframe");var t=a.length;var r="<";var o=">";var i;e.style.display="none";n(210).appendChild(e);e.src="javascript:";i=e.contentWindow.document;i.open();i.write(r+"script"+o+"document.F=Object"+r+"/script"+o);i.close();c=i.F;while(t--)delete c[l][a[t]];return c()};e.exports=Object.create||function e(t,n){var a;if(null!==t){s[l]=r(t);a=new s;s[l]=null;a[i]=t}else a=c();return void 0===n?a:o(a,n)}},168:function(e,t,n){e.exports=n(64)},181:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},182:function(e,t,n){var r=n(66);var o=n(154);var a=n(183);e.exports=function(e){return function(t,n,i){var s=r(t);var l=o(s.length);var c=a(i,l);var _;if(e&&n!=n)while(l>c){_=s[c++];if(_!=_)return true}else for(;l>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}}},183:function(e,t,n){var r=n(95);var o=Math.max;var a=Math.min;e.exports=function(e,t){e=r(e);return e<0?o(e+t,0):a(e,t)}},191:function(e,t,n){var r=n(137);var o=n(110).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return r(t,o)}},192:function(e,t,n){var r=n(114);var o=n(43)("toStringTag");var a="Arguments"==r(function(){return arguments}());var i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=i(t=Object(e),o))?n:a?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},204:function(e,t,n){var r=n(58);var o=n(71);var a=n(98);e.exports=n(56)?Object.defineProperties:function e(t,n){o(t);var i=a(n);var s=i.length;var l=0;var c;while(s>l)r.f(t,c=i[l++],n[c]);return t}},205:function(e,t,n){var r=n(60);var o=n(120);var a=n(101)("IE_PROTO");var i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=o(e);if(r(e,a))return e[a];if("function"==typeof e.constructor&&e instanceof e.constructor)return e.constructor.prototype;return e instanceof Object?i:null}},208:function(e,t,n){var r=n(95);var o=n(96);e.exports=function(e){return function(t,n){var a=String(o(t));var i=r(n);var s=a.length;var l,c;if(i<0||i>=s)return e?"":void 0;l=a.charCodeAt(i);return l<55296||l>56319||i+1===s||(c=a.charCodeAt(i+1))<56320||c>57343?e?a.charAt(i):l:e?a.slice(i,i+2):c-56320+(l-55296<<10)+65536}}},209:function(e,t,n){"use strict";var r=n(163);var o=n(83);var a=n(119);var i={};n(64)(i,n(43)("iterator"),function(){return this});e.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)});a(e,t+" Iterator")}},210:function(e,t,n){var r=n(46).document;e.exports=r&&r.documentElement},215:function(e,t,n){var r=n(192);var o=n(43)("iterator");var a=n(80);e.exports=n(52).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},220:function(e,t,n){"use strict";var r=n(221);var o=n(222);var a=n(80);var i=n(66);e.exports=n(155)(Array,"Array",function(e,t){this._t=i(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var n=this._i++;if(!e||n>=e.length){this._t=void 0;return o(1)}if("keys"==t)return o(0,n);if("values"==t)return o(0,e[n]);return o(0,[n,e[n]])},"values");a.Arguments=a.Array;r("keys");r("values");r("entries")},221:function(e,t){e.exports=function(){}},222:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},224:function(e,t,n){e.exports={default:n(248),__esModule:true}},2315:function(e,t){(function(){TS.registerModule("i18n",{onStart:function e(){TS.interop.i18n.getReverseKeyCodeMap();TS.prefs&&TS.prefs.keyboard_changed_sig.add(i);TS.generic_notification_banner&&!TS.boot_data.modernized_banners&&TS.generic_notification_banner.banner_to_show_sig.add(r);window.signals?TS.i18n.keyboard_changed_sig=new signals.Signal:TS.i18n.keyboard_changed_sig={add:function e(){},remove:function e(){},dispatch:function e(){}}},keyboard:function t(){if(!e)if(TS.interop.desktop.canAutoGetKeyboard()){e=TS.interop.i18n.normalizeKeyboardFromDesktop(desktop.app.getLocaleInformation().currentKeyboardLayout);desktop.app.onDidChangeKeyboardLayout(a)}else{if(!TS.prefs.prefs_loaded)return"us";e=TS.prefs.getPref("keyboard")||"us"}if("en-US"===e)return"us";return e},sendButtonEnabled:function e(){return TS.prefs&&TS.prefs.getPref("msg_input_send_btn")},setUpStaticTranslations:function e(){return o()},getStaticTranslation:function e(t,n){if(!s())return null;var r=TS.storage.fetchStaticTranslations();var o=_.get(r,"data."+n);if(!o||!o[t])return null;return o[t]}});var e;var t=0;var n=function e(){if(TS.client&&!TS.prefs.getPref("seen_locale_change_message")){if(window.desktop&&void 0===window.teamId&&t<100){t+=1;setTimeout(e,50);return}if(!window.desktop||window.desktop.reduxHelper&&window.desktop.reduxHelper.isSelectedTeam&&window.desktop.reduxHelper.isSelectedTeam())TS.interop.api.call("slackbot.sendLocalizationMessage");else{TS.prefs.setPrefLocal("seen_locale_change_message",2);TS.prefs.setPrefByAPI({name:"seen_locale_change_message",value:2})}}};var r=function e(t){if("i18n_japan_beta_send_btn_banner"===t.name){var n=function e(){var t=TS.generic_notification_banner.getPref("i18n_japan_beta_send_btn_banner_cta_count")+1;var n=Math.floor(Date.now()/1e3);TS.generic_notification_banner.setPrefs({i18n_japan_beta_send_btn_banner_cta_count:t,i18n_japan_beta_send_btn_banner_cta_last_ts:n});TS.prefs.msg_input_send_btn_changed_sig.remove(e);TS.prefs.msg_input_send_btn_auto_set_changed_sig.remove(e);TS.generic_notification_banner.is_showing&&TS.generic_notification_banner.close()};TS.prefs.msg_input_send_btn_changed_sig.add(n);TS.prefs.msg_input_send_btn_auto_set_changed_sig.add(n);var r=TS.interop.i18n.t("Just for Japan: a button for sending","send_btn")();var o=TS.interop.i18n.t('Send a message with a quick click, or by pressing {keys}</br>\t\t\tDon\u2018t like the change? You can always switch back in <button id="send_btn_link_prefs" class="{class}">your preferences</button>.',"send_btn","a24238c9e64b0da0daa15baf2c6d29478d3f1e8f")({keys:TS.interop.i18n.safeString('<span class="c-keyboard_key c-keyboard_key--slim">'+(TS.model.is_mac?"\u2318":"Ctrl")+'</span>\n\t\t\t<span class="c-keyboard_key c-keyboard_key--slim">Enter</span>'),class:"btn_link"});TS.generic_notification_banner.start({h1_copy:r,h2_copy:o,show_go_button:true,go_button_text:TS.interop.i18n.t("Got It","send_btn")(),onGo:n,show_go_link_button:false,show_close_button:false});$("#send_btn_link_prefs").on("click",function(){TS.ui.prefs_dialog.start("advanced","#msg_input_send_btn_label");n()})}};var o=function e(){if(s())return Promise.resolve();return TS.interop.api.call("i18n.translations.get").then(function(e){var t=e.data;if(!t||!t.ok){TS.error("Failed to fetch static i18n translations, recieved this response: ",e);return}TS.model.static_translations_cache_ts=t.cache_ts;TS.storage.storeStaticTranslations({data:t,cache_ts:TS.model.static_translations_cache_ts,locale:t.locale})})};var a=function t(n){e=TS.interop.i18n.normalizeKeyboardFromDesktop(n);TS.i18n.keyboard_changed_sig.dispatch()};var i=function t(){if(!TS.model.is_our_app){e=TS.prefs.getPref("keyboard");TS.i18n.keyboard_changed_sig.dispatch()}};var s=function e(){var t=TS.storage.fetchStaticTranslations();if(!t)return false;if(TS.model.static_translations_cache_ts!==t.cache_ts)return false;if(TS.interop.i18n.locale!==t.locale)return false;return true}})()},24:function(e,t,n){"use strict";t.__esModule=true;var r=n(412);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},248:function(e,t,n){n(249);e.exports=n(52).Object.assign},2486:function(e,t,n){"use strict";n.r(t);var r=n(3);var o=n.n(r);var a=n(40);var i=n.n(a);(function(){TS.registerModule("emoji",{onStart:function e(){T.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)});TS.web&&TS.web.login_sig.add(TS.emoji.onLogin);TS.client&&TS.client.login_sig.add(TS.emoji.onLogin);TS.prefs.jumbomoji_changed_sig.add(b);var t=true;v=TS.utility.throttleFunc(v,3e3,t);window._&&(j=_.debounce(j,3e3,{leading:false,trailing:t}))},onLogin:function e(){b()},isValidName:function t(n){if(!n)return false;n=TS.emoji.stripWrappingColons(n).toLowerCase();if(TS.boot_data.feature_sonic_emoji){if(!TS.interop.emoji.isValidEmojiText(n))return false;return n}if("undefined"===typeof e[n])return false;return n},isEmojiNameSafe:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.rules.emoji.isEmojiNameSafe(t);var n=TS.emoji.legacyGetColonsRx();if(!n||!n.source)return false;var r=":"+t+":";var o=new RegExp("^"+n.source+"$");return o.test(r)},substringMatchesName:function e(t,n){if(TS.boot_data.feature_sonic_emoji)return;if(!t||!n||!_.isString(t)||!_.isString(n))return false;if("::"===n)return false;var r=":"===n.charAt(0);var o=":"===n.slice(-1);n=TS.emoji.stripWrappingColons(n.toLowerCase());if(!n)return true;if(r&&o)return n===t;if(r)return t.slice(0,n.length)===n;if(o)return t.slice(-1*n.length)===n;var a=-1!==t.indexOf(n);if(a)return true;return false},emojiMatchesTerm:function e(t,n,r){if(TS.boot_data.feature_sonic_emoji)return;if(!t||!n)return false;var o=TS.emoji.nameToBaseName(t.display_name||t.name);o=TS.interop.i18n.deburr(o);n=TS.emoji.normalizeSearchTerm(n);if(TS.emoji.substringMatchesName(o,n))return true;var a=TS.interop.i18n.deburr(t.display_names||t.names);t.display_names&&t.display_names!==t.names&&(a+=" "+t.names);var i=a.split(" ");for(var s=0;s<i.length;s+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(i[s]),n))return true;return-1!==_.indexOf(r,o)},normalizeSearchTerm:function e(t){if(!t||!_.isString(t))return;t=t.toLowerCase();t=TS.interop.i18n.deburr(t);t=t.replace(/['\u02bc\u2019]/g,"'");return t},nameToBaseName:function e(t){if(!_.isString(t))return"";t=TS.emoji.stripLocalizedSkinTone(t);t=TS.emoji.stripWrappingColons(t);return t},stripLocalizedSkinTone:function e(t){var n=/::skin-tone-[2-6]:/g;t=t.replace(n,":");if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var r=TS.emoji.getLocalSkinToneName();n=new RegExp("::"+r+"-[2-6]:","g")}t=t.replace(n,":");return t},stripWrappingColons:function e(t){if(!t)return"";t="string"===typeof t?t:""+t;if(":"===t[0]){if(":"===t[t.length-1])return t.slice(1,t.length-1);return t.slice(1,t.length)}if(":"===t[t.length-1])return t.slice(0,t.length-1);return t},nameToCanonicalName:function e(t){t=TS.emoji.stripWrappingColons(t);if(!t)return"";t=String(t).toLowerCase();if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.getCanonicalEmojiName(t)||t;var n=function(){var e=t.split("::");if(2!=e.length)return"";t=e[0];return"::"+e[1]}();return(m()[t]||t)+n},emojiHasAliases:function e(t){if(TS.boot_data.feature_sonic_emoji)return;return-1!==t.names.indexOf(" ")},addCustomEmoji:function e(t,n,r){if(TS.boot_data.feature_sonic_emoji)return;k(t,n,r)},removeCustomEmoji:function e(t,n){if(TS.boot_data.feature_sonic_emoji)return;var r;k(t,r,n)},renameCustomEmoji:function e(t,n,r,o){if(TS.boot_data.feature_sonic_emoji)return;TS.emoji.removeCustomEmoji(t,o);TS.emoji.addCustomEmoji(n,r,o)},ingestCustoms:function e(t){if(TS.boot_data.feature_sonic_emoji)return;TS.model.all_custom_emoji.length=0;TS.model.emoji_complex_customs={};a={};var n;var r;var o=[];_.forOwn(S.data,function(e){o.push.apply(o,e[3])});function s(e){return S.map.colons.hasOwnProperty(e)||o.indexOf(e)>=0}function l(e){var t=TS.emoji.maybeGetCanonicalEmojiName(e);return t!==e}_.forOwn(t,function(e,t){if("object"===("undefined"===typeof e?"undefined":i()(e))){TS.model.emoji_complex_customs[t]=e;S.data[t]=[[],null,null,[t],null,null,null,e.apple];S.map.colons[t]=t;TS.model.all_custom_emoji.push(t)}else{if(0===e.indexOf("alias:"))return;if(s(t)){TS.error("can't ingest custom emoji :"+t+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(t)){TS.error("can't ingest custom emoji :"+t+": because it's invalid");return}S.data[t]=[[],null,null,[t],null,null,null,e];S.map.colons[t]=t;TS.model.all_custom_emoji.push(t)}});_.forOwn(t,function(e,t){if("object"===("undefined"===typeof e?"undefined":i()(e))||0!==e.indexOf("alias:"))return;if(s(t)){TS.error("can't ingest custom emoji :"+t+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(t)){TS.error("can't ingest custom emoji :"+t+": because it's invalid");return}n=e.replace("alias:","");r=S.data.hasOwnProperty(n)&&S.data[n];if(r){r[3].push(t);S.map.colons[t]=n;return}n=S.map.colons.hasOwnProperty(n)&&S.map.colons[n];r=S.data.hasOwnProperty(n)&&S.data[n];if(r){r[3].push(t);S.map.colons[t]=n;return}TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.warn('alias for "'+t+'":"'+e+'" not recognized')});TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.forOwn(t,function(e,t){l(t)&&(a[t]=true)});TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort();if(S&&S.inits){delete S.inits.emoticons;S.init_emoticons()}f=p()},bootEmoji:function e(){r=r?r.finally(TS.emoji.setUpEmoji):TS.emoji.setUpEmoji();return r},setUpEmoji:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.redux.dispatch(TS.interop.redux.actions.loadEmoji());return new Promise(function(e){if(!S){TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji, there was nothing to do");return e()}var t=function t(){S.buildKeywordIndex();y();TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji");e()};w();if(!TS.boot_data.page_needs_custom_emoji)return t();if(!TS.boot_data.page_needs_custom_emoji_fresh){var n=TS.storage.fetchCustomEmoji();"calls"!==TS.boot_data.app||TS.model.emoji_cache_ts||(TS.model.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts"));if(n&&TS.model.emoji_cache_ts==n.cache_ts){TS.model.did_we_load_with_emoji_cache=true;TS.emoji.ingestCustoms(n.data);return t()}}TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Fetching emoji list before setting up emoji");var r=function e(n,r){if(!n||!r.emoji)return t();TS.model.emoji_cache_ts=r.cache_ts;TS.storage.storeCustomEmoji({data:r.emoji,cache_ts:TS.model.emoji_cache_ts});TS.boot_data.feature_fix_custom_emoji_errors&&w();TS.emoji.ingestCustoms(r.emoji);t()};TS.interop.api.call("emoji.list",{include_complex_values:1}).then(function(e){var t=e.data,n=e.args,o=e.request_id;var a=true;r(a,t,n,o);return{data:t,args:n,request_id:o}}).catch(function(e){var t=e.data,n=e.args,o=e.request_id;var a=false;r(a,t,n,o);return{data:t,args:n,request_id:o}})})},resetUpEmoji:function e(){TS.storage.storeCustomEmoji("");v()},maybeRemakeMenuListsIfFrequentsChanged:function e(){if(TS.boot_data.feature_sonic_emoji)return;var n=u();TS.utility.areSimpleObjectsEqual(n,t,"maybemakeMenuLists")||d(n)},replaceFrecentlyUsed:function e(){if(TS.boot_data.feature_sonic_emoji)return;var t=M();if(!t.length)return;if(!_.isEqual(t,n)){d(t);n=t}},makeMenuLists:function n(){if(TS.boot_data.feature_sonic_emoji)return;TS.model.emoji_groups.length=0;TS.model.emoji_names.length=0;e={};var r=_.cloneDeep(T);var o=x();o&&o.length&&r.push({display_name:TS.interop.i18n.t("Custom","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:o});t=u();r.unshift({name:"mine",display_name:TS.interop.i18n.t("Frequently Used","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:t});var i;var s;var l=[];for(i=0;i<r.length;i+=1)l=l.concat(r[i].emoji_names);var c={};Object.keys(S.data).forEach(function(t){var n=S.data[t][3];var r=TS.emoji.isIdxSkinToneModifiable(t);n.forEach(function(n,o,a){var i=n;var s=_.compact(a);s.length!==a.length&&TS.error('Emoji "'+n+'" contains bad record(s) in "names" prop');TS.model.emoji_names.push(n);e[n]=true;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){i=TS.emoji.maybeGetLocalizedEmojiName(n);s=a.map(function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)})}c[n]={html:TS.emoji.graphicReplace(":"+n+":"),name:":"+n+":",names:":"+a.join(": :")+":",display_name:":"+i+":",display_names:":"+s.join(": :")+":"};TS.model.emoji_map.push({id:"E"+t+(o>0?"_alias_"+o:""),name:n,name_with_colons:":"+n+":",display_name:i,is_skin:r,is_emoji:true});if(r){c[n].is_skin=true;c[n].skin_tone_id="1";S.skin_tones.forEach(function(r){if(!g(t,r))return;var o=S.data[r];var l=o[3][0];var _=n+"::"+l;TS.model.emoji_names.push(_);e[_]=true;var u=":"+_+":";var d=a.map(function(e){return e+"::"+l});var f=u;var m=d;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var p=TS.emoji.maybeGetLocalizedEmojiName(l);f=":"+i+"::"+p+":";m=s.map(function(e){return e+"::"+p})}c[_]={is_skin:true,skin_tone_id:l.substr(-1,1),html:TS.emoji.graphicReplace(u),name:u,names:":"+d.join(": :")+":",display_name:f,display_names:":"+m.join(": :")+":"}})}})});h=c;TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id");TS.boot_data.feature_emoji_by_id&&(TS.model.emoji_map_by_id=_.keyBy(TS.model.emoji_map,"id"));for(i=0;i<l.length;i+=1){var d=l[i];c[d]||TS.info(d+" not in cat_map?")}var f;var m;var p;var v;for(i=0;i<r.length;i+=1){f=r[i];m=[];p=null;v="";f.tab_icon_html&&(v=f.tab_icon_html);for(s=0;s<f.emoji_names.length;s+=1){p=c[f.emoji_names[s]];m.push(p);if(v)continue;f.emoji_names[s]==f.name&&(v=p.html)}p=m[0];TS.model.emoji_groups.push({name:f.name,display_name:f.display_name,tab_html:v||p.html,tab_icon:f.tab_icon,tab_icon_name:f.tab_icon_name,items:m})}var b=TS.emoji.getCurrentSheetUrl();if(E("ss_emojis")&&b){var w=new Image;w.onload=function(){w.onload=null;w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";w=null};w.src=b}TS.model.emoji_names.sort();TS.emoji.friendlyReorder();var y=TS.model.emoji_names.indexOf("ok");var k=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[y]="ok_hand";TS.model.emoji_names[k]="ok";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.each(a,function(e,t){var n=_.remove(TS.model.emoji_map,{name:t});TS.boot_data.feature_emoji_by_id&&n.forEach(function(e){delete TS.model.emoji_map_by_id[e.id]})})},friendlyReorder:function e(){if(TS.boot_data.feature_sonic_emoji)return;var t=[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}];t.forEach(function(e){var t=_.reduce(TS.model.emoji_names,function(t,n,r){if(0===n.indexOf(e.filter)){var o=TS.model.all_custom_emoji.indexOf(n)>-1;var a=!o&&0===n.indexOf(e.first);var i=!o&&!a&&0===n.indexOf(e.second);t.emoji.push({name:n,is_first:a,is_second:i});t.indexes.push(r)}return t},{indexes:[],emoji:[]});t.emoji=_.orderBy(t.emoji,["is_first","is_second","name"],["desc","desc","asc"]);_.forEach(t.emoji,function(e,n){var r=t.indexes[n];TS.model.emoji_names[r]=e.name})})},isIdxSkinToneModifiable:function e(t){if(TS.boot_data.feature_sonic_emoji)return;return g(t,S.skin_tones[0])},isNameSkinToneModifiable:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.isEmojiNameSkinToneModifiable(t);t=TS.emoji.stripWrappingColons(t);t=String(t).toLowerCase();var n=S.map.colons[t];return TS.emoji.isIdxSkinToneModifiable(n)},renderIconFallback:function e(t){var n=t.replace(/:/g,"");return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+n+'"></ts-icon>'},sonicGenerateEmojiHtml:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!TS.boot_data.feature_sonic_emoji)return null;var n=TS.interop.emojiComponent.mapStateToProps(t)||{};var r=o()({},t,n);var a=r.displayText,i=r.url,s=r.renderAsText,l=r.iconInTextMode,c=r.className,u=r.includeTitle,d=r.includeText;if(s||!i){if(l)return TS.emoji.renderIconFallback(a);return a}var f=["emoji","emoji-sizer",c];return TS.templates.sonic_emoji({url:i,displayText:d&&a,displayTitle:u&&TS.emoji.stripWrappingColons(a),emojiClassNames:_.compact(f).join(" ")})},sonicReplaceEmojiInString:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=TS.interop.utility.getColonsRx();return t.replace(r,function(e){return TS.emoji.sonicGenerateEmojiHtml(o()({},n,{text:e}))})},graphicReplace:function e(t,n){if(!t)return"";n=n||{};if(TS.boot_data.feature_sonic_emoji){var r=n.emojiSize;!r&&n.jumbomoji&&(r=TS.interop.emojiComponent.EmojiSizes.LARGE);return TS.emoji.sonicReplaceEmojiInString(t,{emojiSize:r,forceDisplay:n.force_img,stopAnimations:n.stop_animations,className:n.jumbomoji?"emoji-only":void 0,iconInTextMode:n.show_icon_for_emoji_in_as_text_mode&&TS.interop.emoji.isValidEmojiText(t),includeTitle:n.include_title,includeText:n.include_text})}var o=S;if(n.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(t))return TS.emoji.renderIconFallback(t);o.init_env();var a=o.text_mode;var i=o.include_title;var s=o.include_text;var l=o.supports_css;var c=o.allow_skin_tone_squares;if(n.force_img&&n.obey_emoji_mode_pref){n.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")}if(n.force_style&&n.obey_emoji_mode_pref){n.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+n.force_style)}o.text_mode=n.obey_emoji_mode_pref&&TS.interop.rules.emoji.shouldRenderEmojiAsText();if(n.force_style){TS.emoji.setEmojiMode(n.force_style);o.use_sheet=false}o.include_title=!!n.include_title;o.include_text=!!n.include_text;o.supports_css=!n.force_img;o.allow_skin_tone_squares=!n.no_skin_tone_squares;var _=o.replace_colons(t,{stop_animations:n.stop_animations});n.jumbomoji&&(_=_.replace("emoji-sizer","emoji-sizer emoji-only"));n.force_style&&TS.emoji.setEmojiMode();o.text_mode=a;o.include_title=i;o.include_text=s;o.supports_css=l;o.allow_skin_tone_squares=c;return _},replaceColons:function e(t){if(TS.boot_data.feature_sonic_emoji)return null;if(t.indexOf(":")<0)return t;return S.replace_colons(t)},maybeUnifiedReplace:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.replaceTextEmojiWithNative(t);if("unified"!==S.replace_mode)return t;return S.replace_colons_with_unified(t)},legacyReplaceEmoticons:function e(t){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.replaceEmoticonsWithColons(t);return S.replace_emoticons_with_colons(t)},getLocalSkinToneName:function e(){var t="skin-tone";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=TS.boot_data.feature_sonic_emoji?TS.emoji.maybeGetLocalizedEmojiName("skin-tone"):TSFEmoji.getLocalSkinToneName(TS.interop.i18n.locale));return t},getChosenSkinTone:function e(t){var n=parseInt(E("preferred_skin_tone"),10);if(!n||"1"==n||!_.includes([2,3,4,5,6],n))return"";var r=t?TS.emoji.getLocalSkinToneName():"skin-tone";return r+"-"+n},getChosenSkinToneModifier:function e(t){var n=TS.emoji.getChosenSkinTone(t);if(!n)return"";return":"+n+":"},setEmojiMode:function e(t){if(TS.boot_data.feature_sonic_emoji)return;var n=["google","apple"];t=t||TS.interop.rules.emoji.getEmojiMode();S.text_mode="as_text"===t;S.do_emoticons=!!E("graphic_emoticons");S.allow_native=false;S.use_sheet=function(){if(!E("ss_emojis"))return false;return!!TS.boot_data.page_needs_custom_emoji}();var r=t;"as_text"==t&&(r=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true}));S.img_set=_.includes(n,r)?r:"apple";if(!TS.model.emoji_complex_customs)return;for(var o in TS.model.emoji_complex_customs){if(!S.data[o])continue;S.data[o][7]=TS.model.emoji_complex_customs[o][S.img_set]}},legacyGetColonsRx:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.getColonsRx();return S&&S.rx_colons},legacyGetEmojiNames:function e(){if(TS.boot_data.feature_sonic_emoji)return TS.interop.redux.models.emoji.getAllEmojiNames(TS.redux.getState());return _.map(TS.emoji.getEmojiMap(),"name")},getEmojiByName:function e(t){if(TS.boot_data.feature_sonic_emoji)return;if(!t)return;return _.find(TS.model.emoji_map,{name:t})},getEmojiById:function e(t){if(TS.boot_data.feature_sonic_emoji)return;if(TS.boot_data.feature_emoji_by_id)return TS.model.emoji_map_by_id[t];var n=_.find(TS.model.emoji_map,{id:t});if(!n){TS.warn("no emoji ob found for "+t);return}return n},getEmojiMap:function e(){if(TS.boot_data.feature_sonic_emoji)return;return TS.model.emoji_map},getEmojiForSpaces:function e(){var t={emoji:{}};if(TS.boot_data.feature_sonic_emoji){t.emoticonEmojiNames=TS.interop.utility.getEmoticonMap();t.replace=function(e){var t=TS.interop.utility.replaceNativeEmojiWithText(e);if(!t)return e;return TS.emoji.maybeGetCanonicalEmojiString(t)}}else{t.emoticonEmojiNames=S.emoticons_data;t.sheetSize=S.sheet_size;t.sheetPath=TS.emoji.getCurrentSheetUrl();t.replace=function(){var e=S.colons_mode;S.colons_mode=true;var t=S.replace_unified.apply(S,arguments);TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=TS.emoji.maybeGetCanonicalEmojiString(t));S.colons_mode=e;return t}}TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t.getLocalEmojiString=function(e){if(!e)return"";return TS.emoji.maybeGetLocalizedEmojiName(e)||e});if(TS.boot_data.feature_sonic_emoji){var n=TS.interop.emojiComponent.EmojiSizes.MEDIUM;var r=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true});TS.emoji.legacyGetEmojiNames().forEach(function(e){var o=TS.interop.emoji.getEmojiUrl({text:e,emojiMode:r,emojiSize:n});E("a11y_animations")||(o=TS.utility.getImgProxyURLWithOptions(o,{emoji:true}));t.emoji[e]=o})}else Object.keys(S.data).forEach(function(e){var n=S.data[e];var r=n[3];var o=n[4];var a=n[5];var i=n[7];var s;if(null!==o&&null!==a)s=[o,a];else{if(!i){TS.error('WTF, _emoji "'+e+'" is missing coords or and a url, or something!');return}s=false===E("a11y_animations")?TS.utility.getImgProxyURLWithOptions(i,{emoji:true}):i}r.forEach(function(e){t.emoji[e]=s})});return t},getCurrentSheetUrl:function e(){if(TS.boot_data.feature_sonic_emoji)return null;return S.img_sets[S.img_set].sheet},getCurrentImagePath:function e(){if(TS.boot_data.feature_sonic_emoji)return null;return S.img_sets[S.img_set].path},hasUnifiedEmoji:function e(t){if(TS.boot_data.feature_sonic_emoji){if(!_.isString(t))return false;var n=TS.interop.utility.getNativeEmojiRx();return-1!==t.search(n)}S.init_unified();return-1!==t.search(S.rx_unified)},test:function e(){return{emoji:S}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function e(t){if(TS.boot_data.feature_sonic_emoji)return;var n=0;t.concat().forEach(function(e,r){var o=S.map.colons[e];var a=S.data.hasOwnProperty(o)&&S.data[o];if(!a)return;S.skin_tones.forEach(function(a){if(!g(o,a))return;var i=S.data[a];var s=i[3][0];var l=e+"::"+s;if(-1!==t.indexOf(l))return;n+=1;var c=n+r;t.splice(c,0,l)})})},findByKeyword:function e(t){if(TS.boot_data.feature_sonic_emoji)return null;return S.findByKeyword(t)},getObsoletedEmojiNameFromModernEmojiName:function e(t){if(TS.boot_data.feature_sonic_emoji)return;if(!t)return null;var n=TS.emoji.stripWrappingColons(t);var r=/(::skin-tone-[2-6])/;var o=n.match(r);var a=o?o[1]:"";var i=n.replace(r,"");var s=S.map.colons[i];if(!s)return null;var l=S.obsoletes_data[s];var c=l&&l[4]&&l[4][0];if(c&&c!=i)return c+a;return null},maybeGetCanonicalEmojiString:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.convertEmojiInStringToCanonical({locale:TS.interop.i18n.locale,text:t});return TSFEmoji.translateEmojiStringToCanonical(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},maybeGetLocalizedEmojiString:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.convertEmojiInStringToLocalized({locale:TS.interop.i18n.locale,text:t});return TSFEmoji.translateEmojiStringToLocal(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},maybeGetLocalizedEmojiName:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.getLocalizedEmojiName({locale:TS.interop.i18n.locale,name:t});return TSFEmoji.getLocalEmojiString(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},maybeGetCanonicalEmojiName:function e(t){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){if(TS.boot_data.feature_sonic_emoji)return TS.interop.utility.emojiTranslation.getCanonicalEmojiName({locale:TS.interop.i18n.locale,name:t});return TSFEmoji.getCanonicalEmojiString(t,TS.interop.i18n.locale,{include_emoji_5:true})}return t},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/ecf3e/img/emoji_missing.png);"></span>'});var e={};var t;var n;var r;var a={};var s="E";var l=36;var c=50;var u=function e(){var t;var n={};_.each(_.keys(TS.model.emoji_use),function(e){t=TS.emoji.nameToCanonicalName(e.split("::")[0]);if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&O(t))return;n.hasOwnProperty(t)||(n[t]=0);n[t]+=TS.model.emoji_use[e]});TS.dir(777,n,"condensed emoji names:");var r=Object.keys(n).sort(function(e,t){var r=n[e];var o=n[t];if(r==o){if(e<t)return-1;if(e>t)return 1}return-(r-o)});var o=9;r.length=Math.min(r.length,4*o);var a=["slightly_smiling_face","heart","+1","100","bug"];var i;while(r.length<5&&a.length){i=a.shift();-1===r.indexOf(i)&&r.push(i)}TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(r);return r};var d=function e(n){t=n;var r=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});r||TS.emoji.makeMenuLists();var o=[];t.forEach(function(e){var t=h[e];t&&o.push(t)});r.items=o};var f;var m=function e(){f=f||p();return f};var p=function e(){var t={};var n;Object.keys(S.data).forEach(function(e){n=S.data[e];t[n[3][0]]=null;n[3].forEach(function(e){if(t.hasOwnProperty(e))return;t[e]=n[3][0]})});return t};var g=function e(t,n){return!!(S.variations_data[t]&&S.variations_data[t][n])};var S=emoji;var h={};var T=[{name:"people",display_name:TS.interop.i18n.t("People","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","face_palm","man-facepalming","woman-facepalming","shrug","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","person_doing_cartwheel","man-cartwheeling","woman-cartwheeling","wrestlers","man-wrestling","woman-wrestling","water_polo","man-playing-water-polo","woman-playing-water-polo","handball","man-playing-handball","woman-playing-handball","juggling","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"]},{name:"nature",display_name:TS.interop.i18n.t("Nature","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"]},{name:"food_and_drink",display_name:TS.interop.i18n.t("Food & Drink","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"]},{name:"activity",display_name:TS.interop.i18n.t("Activity","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"]},{name:"travel_and_places",display_name:TS.interop.i18n.t("Travel & Places","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{name:"objects",display_name:TS.interop.i18n.t("Objects","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"]},{name:"symbols",display_name:TS.interop.i18n.t("Symbols","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"]},{name:"flags",display_name:TS.interop.i18n.t("Flags","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]}];var v=function e(){TS.emoji.setUpEmoji()};var b=function e(){if(TS.client&&TS.model.ms_logged_in_once){TS.view.rebuildMentions();TS.view.rebuildStars();TS.model.previewed_file_id&&TS.client.ui.files.rebuildFilePreview()}};var w=function e(){if(S.unaltered_data){S.data=JSON.parse(JSON.stringify(S.unaltered_data));S.inits={}}S.ts_init_colons()};var y=function e(){TS.emoji.setEmojiMode();TS.emoji.makeMenuLists();var t=!!TS.model.ms_logged_in_once;var n=true;TS.client&&t&&TS.client.ui.rebuildAll(n);TS.redux&&TS.interop&&TS.interop.redux&&TS.redux.dispatch(TS.interop.redux.features.customEmoji.updateCustomEmoji())};var k=function e(t,n,r){if(!S)return;var o=TS.storage.fetchCustomEmoji();if(!o){TS.logError("error_updating_emoji","Attempting to update custom emoji, but no custom emoji data is in local storage");return}if("undefined"===typeof n){delete TS.model.emoji_use[t];if(!o.data.hasOwnProperty(t))return;delete o.data[t];var a=_.remove(TS.model.emoji_map,{name:t});TS.boot_data.feature_emoji_by_id&&a.forEach(function(e){delete TS.model.emoji_map_by_id[e.id]})}else o.data[t]=n;TS.model.emoji_cache_ts=r;TS.storage.storeCustomEmoji({data:o.data,cache_ts:TS.model.emoji_cache_ts});j(o.data)};var j=function e(t){w();TS.emoji.ingestCustoms(t);y()};var x=function e(){var t=TS.model.all_custom_emoji;TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=C(t));return t};var O=function e(t){return!!a[t]};var E=function e(t){return TS.prefs&&TS.prefs.getPref(t)};var C=function e(t){return _.filter(t,function(e){return!O(e)})};var M=function e(){var t=TS.ui.frecency.getMostCommonWithPrefix(s,c);t=_.map(t,"id");if(!t.length)return[];var n=TS.emoji.getChosenSkinTone(true);var r=_.keyBy(TS.model.emoji_map,"id");var o=[];return _.chain(t).map(function(e){var t=r[e];if(!t)return null;var a=t.display_name;n&&t.is_skin&&(a=a+"::"+n);var i=h[a];if(!i)return null;if(TS.emoji.emojiHasAliases(i)){var s=i.names.split(" ");for(var l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(_.includes(o,c))return null}}o.push(a);return a}).compact().take(l).value()}})()},249:function(e,t,n){var r=n(86);r(r.S+r.F,"Object",{assign:n(250)})},250:function(e,t,n){"use strict";var r=n(98);var o=n(132);var a=n(111);var i=n(120);var s=n(133);var l=Object.assign;e.exports=!l||n(73)(function(){var e={};var t={};var n=Symbol();var r="abcdefghijklmnopqrst";e[n]=7;r.split("").forEach(function(e){t[e]=e});return 7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function e(t,n){var l=i(t);var c=arguments.length;var _=1;var u=o.f;var d=a.f;while(c>_){var f=s(arguments[_++]);var m=u?r(f).concat(u(f)):r(f);var p=m.length;var g=0;var S;while(p>g)d.call(f,S=m[g++])&&(l[S]=f[S])}return l}:l},261:function(e,t,n){var r=n(111);var o=n(83);var a=n(66);var i=n(115);var s=n(60);var l=n(136);var c=Object.getOwnPropertyDescriptor;t.f=n(56)?c:function e(t,n){t=a(t);n=i(n,true);if(l)try{return c(t,n)}catch(e){}if(s(t,n))return o(!r.f.call(t,n),t[n])}},275:function(e,t,n){e.exports={default:n(287),__esModule:true}},276:function(e,t,n){var r=n(91)("meta");var o=n(68);var a=n(60);var i=n(58).f;var s=0;var l=Object.isExtensible||function(){return true};var c=!n(73)(function(){return l(Object.preventExtensions({}))});var _=function(e){i(e,r,{value:{i:"O"+ ++s,w:{}}})};var u=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";_(e)}return e[r].i};var d=function(e,t){if(!a(e,r)){if(!l(e))return true;if(!t)return false;_(e)}return e[r].w};var f=function(e){c&&m.NEED&&l(e)&&!a(e,r)&&_(e);return e};var m=e.exports={KEY:r,NEED:false,fastKey:u,getWeak:d,onFreeze:f}},277:function(e,t,n){var r=n(66);var o=n(191).f;var a={}.toString;var i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var s=function(e){try{return o(e)}catch(e){return i.slice()}};e.exports.f=function e(t){return i&&"[object Window]"==a.call(t)?s(t):o(r(t))}},287:function(e,t,n){n(125);n(148);e.exports=n(156).f("iterator")},288:function(e,t,n){e.exports={default:n(289),__esModule:true}},289:function(e,t,n){n(290);n(293);n(294);n(295);e.exports=n(52).Symbol},290:function(e,t,n){"use strict";var r=n(46);var o=n(60);var a=n(56);var i=n(86);var s=n(168);var l=n(276).KEY;var c=n(73);var _=n(109);var u=n(119);var d=n(91);var f=n(43);var m=n(156);var p=n(157);var g=n(291);var S=n(292);var h=n(71);var T=n(68);var v=n(66);var b=n(115);var w=n(83);var y=n(163);var k=n(277);var j=n(261);var x=n(58);var O=n(98);var E=j.f;var C=x.f;var M=k.f;var A=r.Symbol;var L=r.JSON;var F=L&&L.stringify;var I="prototype";var P=f("_hidden");var B=f("toPrimitive");var N={}.propertyIsEnumerable;var z=_("symbol-registry");var D=_("symbols");var U=_("op-symbols");var W=Object[I];var R="function"==typeof A;var $=r.QObject;var q=!$||!$[I]||!$[I].findChild;var G=a&&c(function(){return 7!=y(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=E(W,t);r&&delete W[t];C(e,t,n);r&&e!==W&&C(W,t,r)}:C;var V=function(e){var t=D[e]=y(A[I]);t._k=e;return t};var H=R&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A};var K=function e(t,n,r){t===W&&K(U,n,r);h(t);n=b(n,true);h(r);if(o(D,n)){if(r.enumerable){o(t,P)&&t[P][n]&&(t[P][n]=false);r=y(r,{enumerable:w(0,false)})}else{o(t,P)||C(t,P,w(1,{}));t[P][n]=true}return G(t,n,r)}return C(t,n,r)};var J=function e(t,n){h(t);var r=g(n=v(n));var o=0;var a=r.length;var i;while(a>o)K(t,i=r[o++],n[i]);return t};var Y=function e(t,n){return void 0===n?y(t):J(y(t),n)};var Q=function e(t){var n=N.call(this,t=b(t,true));if(this===W&&o(D,t)&&!o(U,t))return false;return!(n||!o(this,t)||!o(D,t)||o(this,P)&&this[P][t])||n};var X=function e(t,n){t=v(t);n=b(n,true);if(t===W&&o(D,n)&&!o(U,n))return;var r=E(t,n);!r||!o(D,n)||o(t,P)&&t[P][n]||(r.enumerable=true);return r};var Z=function e(t){var n=M(v(t));var r=[];var a=0;var i;while(n.length>a)o(D,i=n[a++])||i==P||i==l||r.push(i);return r};var ee=function e(t){var n=t===W;var r=M(n?U:v(t));var a=[];var i=0;var s;while(r.length>i)!o(D,s=r[i++])||n&&!o(W,s)||a.push(D[s]);return a};if(!R){A=function e(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0);var n=function(e){this===W&&n.call(U,e);o(this,P)&&o(this[P],t)&&(this[P][t]=false);G(this,t,w(1,e))};a&&q&&G(W,t,{configurable:true,set:n});return V(t)};s(A[I],"toString",function e(){return this._k});j.f=X;x.f=K;n(191).f=k.f=Z;n(111).f=Q;n(132).f=ee;a&&!n(127)&&s(W,"propertyIsEnumerable",Q,true);m.f=function(e){return V(f(e))}}i(i.G+i.W+i.F*!R,{Symbol:A});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var re=O(f.store),oe=0;re.length>oe;)p(re[oe++]);i(i.S+i.F*!R,"Symbol",{for:function(e){return o(z,e+="")?z[e]:z[e]=A(e)},keyFor:function e(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var n in z)if(z[n]===t)return n},useSetter:function(){q=true},useSimple:function(){q=false}});i(i.S+i.F*!R,"Object",{create:Y,defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});L&&i(i.S+i.F*(!R||c(function(){var e=A();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))})),"JSON",{stringify:function e(t){var n=[t];var r=1;var o,a;while(arguments.length>r)n.push(arguments[r++]);a=o=n[1];if(!T(o)&&void 0===t||H(t))return;S(o)||(o=function(e,t){"function"==typeof a&&(t=a.call(this,e,t));if(!H(t))return t});n[1]=o;return F.apply(L,n)}});A[I][B]||n(64)(A[I],B,A[I].valueOf);u(A,"Symbol");u(Math,"Math",true);u(r.JSON,"JSON",true)},291:function(e,t,n){var r=n(98);var o=n(132);var a=n(111);e.exports=function(e){var t=r(e);var n=o.f;if(n){var i=n(e);var s=a.f;var l=0;var c;while(i.length>l)s.call(e,c=i[l++])&&t.push(c)}return t}},292:function(e,t,n){var r=n(114);e.exports=Array.isArray||function e(t){return"Array"==r(t)}},293:function(e,t){},294:function(e,t,n){n(157)("asyncIterator")},295:function(e,t,n){n(157)("observable")},3:function(e,t,n){"use strict";t.__esModule=true;var r=n(224);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},3077:function(e,t){(function(){TS.registerModule("incremental_boot",{onStart:function e(){TS.channels.switched_sig.add(s);TS.ims.switched_sig.add(s);TS.groups.switched_sig.add(s);TS.mpims.switched_sig.add(s);TS.redux.socket.connectedSig.addOnce(s)},startIncrementalBoot:function t(){if(TS._did_incremental_boot)return Promise.reject(new Error("_startIncrementalBoot called more than once; this is a programming error."));TS._did_incremental_boot=true;var n=TS.boot_data.incremental_boot_data;delete TS.boot_data.incremental_boot_data;var r={canonical_avatars:true,include_full_users:true,count:TS.model.initial_msgs_cnt-1,ignore_replies:true,include_pin_count:true,no_members:true,name_tagging:true,no_user_profile:true};var o=l();if(o){TS.model.c_name_in_url=o;r.name=o;TS.log(123,"Performing incremental boot for channel in URL: "+o)}else{var i=localStorage[c()];if(i){r.channel=i;TS.log(123,"Performing incremental boot for channel from history: "+i)}}a(true);TS.model.change_channels_when_offline=false;var s=u("conversations.view",r);return s.then(function(t){TS._incremental_boot=true;var r=e(n,t.data);return{ok:true,data:r,args:t.args}}).catch(function(e){TS.warn("Incremental boot failed with error: "+e);TS._incremental_boot=false;TS._did_incremental_boot=false;TS.model.change_channels_when_offline=true;a(false);throw e})},beforeFullBoot:function e(){if(!TS._incremental_boot)return;if(!TS._did_incremental_boot)return;if(TS._did_full_boot)return;TS._incremental_boot=false;n=setTimeout(o,1e4);TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container&&TS.client.ui.$messages_input_container.one(t,o);TS.redux.socket.connectedSig.addOnce(o)},afterFullBoot:function e(){if(TS._did_incremental_boot){TS._did_full_boot=true;TS.model.change_channels_when_offline=true}a(false);TS.redux.dispatch(TS.interop.redux.features.incrementalBoot.setFullyBooted(true))},shouldIncrementalBoot:function e(){if(TS._did_incremental_boot)return false;if(!TS.boot_data.incremental_boot_data)return false;if(TS.model.ms_logged_in_once)return false;if(false===_.get(TS.boot_data.incremental_boot_data,"self.prefs.seen_welcome_2",void 0)||false===TS.boot_data.prefs_seen_welcome_2){delete TS.boot_data.incremental_boot_data;return false}if("client"!==TS.boot_data.app||0!==location.pathname.indexOf("/messages")){delete TS.boot_data.incremental_boot_data;return false}return true},userDidInteractWithUI:function e(){TS.sounds.play("beep");o()},getInitialChannelsToUpsert:function e(){return r}});var e=function e(t,n){var r=n;r.channels=r.channels||[];r.groups=r.groups||[];r.ims=r.ims||[];r.mpims=r.mpims||[];var o=r.channel||r.group||r.im;TS.model.initial_cid=o.id;delete r.channel;delete r.group;r.history&&r.history.messages?o.msgs=r.history.messages:o.msgs=[];TS.pins&&r.history&&TS.pins.updateCount(o,r.history.pin_count);Object.keys(t).forEach(function(e){r[e]=_.merge(t[e],r[e])});if(!r.self||r.self.id!=TS.boot_data.user_id)throw new Error("Missing `self` from incremental boot data");_.find(r.users,{id:r.self.id})||r.users.push(r.self);r.users=[r.self];r.users.forEach(function(e){"USLACKBOT"!==e.id&&e.id!=TS.boot_data.user_id||(e.presence="active");delete e.updated});if(o.is_channel)i(o,r.channels);else if(o.is_mpim)i(o,r.mpims);else if(o.is_group)i(o,r.groups);else{if(!o.is_im)throw new Error("Unexpected model object type from channels.view");i(o,r.ims)}return r};var t="change.incremental_boot keydown.incremental_boot paste.incremental_boot";var n;var r=[];var o=function e(){if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container){TS.client.ui.$messages_input_container.off(t);TS.client.ui.$messages_input_container.removeClass("pretend-to-be-online")}TS.redux.socket.connectedSig.remove(e);if(n){clearTimeout(n);n=void 0}};var a=function e(t){$("#col_channels, #team_menu").toggleClass("placeholder",t);$(document.body).toggleClass("incremental_boot",t)};var i=function e(t,n){var r=_.find(n,{id:t.id});r?_.extend(r,t):n.push(t)};var s=function e(){var t=TS.shared.legacyGetActiveModelOb();try{if(t&&t.id){localStorage[c()]=t.id;localStorage[window.boot_data.api_token+"_last_model_ob_id"]=t.id}else delete localStorage[c()]}catch(e){}};var l=function e(){var t=location.pathname.match(/\/messages\/([^\/]+)/);return t&&t[1]};var c=function e(){return window.boot_data.team_id+"_"+window.boot_data.user_id+"_incr_boot_last_model_ob_id_v2"};var u=function e(t,n){return new Promise(function(e,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status){r(new Error("Received non-200 response from "+t));return}var a=JSON.parse(o.responseText);if(!a.ok){r(new Error("Received not-OK from "+t));return}e({ok:true,args:n,data:a})};o.onerror=function(){r(new Error("XHR encountered an error"))};var a=new FormData;Object.keys(n).forEach(function(e){return a.append(e,n[e])});a.append("token",window.boot_data.api_token);var i=""+window.boot_data.api_url+t;o.open("POST",i,!n._synchronously);o.setRequestHeader("X-Slack-Version-Ts",TS.boot_data.version_ts);o.send(a)})}})()},3078:function(e,t){(function(){TS.registerModule("redux",{onStart:function e(){n(TS.interop.redux.configureStore({teamId:r()}))},bindSelectorToStore:function t(n){if(!n)throw new Error("bindSelectorToStore: selector is undefined.");return function(t,r,a,i,s,l,c){if(!e){TS.console.error("Attempting to use a redux selector before the redux store is initialized, returning undefined instead. Selector is: "+n);return}var _=o(n);if(!_){TS.console.error("Selector "+n+" cannot be found. Either it doesn't exist or it hasn't yet been initialized. Returning undefined instead");return}if(_&&_.length>7)throw new Error("bindSelectorToStore only supports selectors accepting up to 7 parameters. This should be more than enough for any use case");return _.call(void 0,TS.redux.getState(),t,r,a,i,s,l,c)}},getState:function t(){var n=e&&e.getState&&e.getState();if(!n){TS.error("No redux state found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return n},getStoreInstance:function t(){if(!e){TS.error("No redux store found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return e},dispatch:function t(n){if(n&&e&&e.dispatch)return e.dispatch(n);if(!n){TS.error("No action provided?");return}TS.error("No dispatch function available. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")},test:{onStart:function e(){n(window.slackCreateTestStore({teamId:r()}))}}});var e;var t={};function n(t){e=t;TS.redux.dispatch(TS.interop.redux.features.experiments.bulkAddExperiments(TS.boot_data.experiment_assignments));TS.redux.dispatch(TS.interop.redux.features.bootData.setBootData(TS.boot_data));TS.interop.desktop.isDesktop&&a()}function r(){return TS.boot_data.team_id||"NO_TEAM_ID"}function o(e){var n=t[e];if(n)return n;n=_.get(window,e);if(!n)return;t[e]=n;return n}function a(){TS.redux.dispatch(TS.interop.redux.createDesktopDelegate());var e=TS.interop.redux.getDelegateForLegacy(window.desktop.delegates[r()]);_.assign(TS.interop,{webapp:e});_.assign(TSSSB,e)}})()},3079:function(e,t){(function(){TS.registerModule("metrics",{onStart:function e(){TS.web&&TS.web.login_sig.add(TS.metrics.onLogin);TS.client&&TS.client.login_sig.add(TS.metrics.onLogin)},onLogin:function e(){TS.interop.metrics.setUser(TS.model&&TS.model.user&&TS.model.user.id||"").setTeam(TS.model&&TS.model.team&&TS.model.team.id||"").setEnterprise(TS.boot_data.enterprise_id||"").setTeamSize(TS.model&&TS.model.members&&TS.model.members.length||0).setVersionTs(TS.boot_data.version_ts).setEndpointUrl(TS.boot_data.beacon_timing_url||window.ts_endpoint_url).setSubAppName("legacy").setLogDomNodeCount(TS.utility.enableFeatureForUser(1)).setSSBMemoryLogging(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron&&"client"===TS.boot_data.app).start()},mark:function e(t){TS.interop.metrics.mark(t)},getLatestMark:function e(t){return TS.interop.metrics.getLatestMark(t)},clearMarks:function e(t){TS.interop.metrics.clearMarks(t)},measure:function e(t,n,r,o){return TS.interop.metrics.measure(t,n,r,o)},measureAndClear:function e(t,n){return TS.interop.metrics.measureAndClear(t,n)},store:function e(t,n,r){return TS.interop.metrics.store(t,n,r)},count:function e(t,n){TS.interop.metrics.count(t,n)},flush:function e(){TS.interop.metrics.sendDataAndEmptyQueue()}})})()},3080:function(e,t){(function(){TS.registerModule("statsd",{onStart:function e(){var t=3e4;var n=5e3;var r=Math.floor(Math.random()*n);setInterval(o,t+r);$(window).on("beforeunload",o)},count:function e(t,n){_.isUndefined(n)&&(n=1);r(t,"count",n)},timing:function e(t,n){r(t,"timing",n)},flush:function e(){o()},mark:function e(t){TS.metrics.mark(t)},clearMarks:function e(t){TS.metrics.clearMarks(t)},measure:function e(t,n,r){var o=TS.metrics.measure(t,n,r,{ephemeral:true});if(_.isNaN(o)||_.isUndefined(o))return;TS.statsd.timing(t,o);return o},measureAndClear:function e(t,n){var r=TS.statsd.measure(t,n);TS.statsd.clearMarks(n);return r},test:function e(){var t={getStats:function e(){return n},reset:function e(){n=[]}};Object.defineProperty(t,"_record",{get:function e(){return r},set:function e(t){r=t}});Object.defineProperty(t,"_sendDataAndEmptyQueue",{get:function e(){return o},set:function e(t){o=t}});return t}});var e=2e3;var t;var n=[];var r=function e(t,r,o){var a;if("count"===r){a=" (count)";o=_.round(o,0)}else{if("timing"!==r){TS.error("TS.statsd._record called with invalid type: "+r);return}a="ms";o=_.round(o,3)}i(t)&&TS.info("[STATSD "+r.toUpperCase()+"] "+t+": "+o+a);n.push({stat:t,type:r,value:o})};var o=function t(){if(!n.length)return;var r=[];var o=[];var s="";var l=function e(t){return a()+"?stats="+encodeURIComponent(JSON.stringify(t))};n.forEach(function(t){o.push(t);s=l(o);if(s.length>e){o.pop();r.push(l(o));o=[t]}});r.push(l(o));r.forEach(function(e){var t=new Image;t.src=e});i()&&TS.info("[STATSD] Sending data: "+JSON.stringify(n));n=[]};var a=function e(){if(t)return t;if(TS.environment.is_dev){var n=location.host.match(/^([^.]+\.)?(?:enterprise\.)?((dev|qa)[0-9]*)\.slack\.com/)[2];t="https://"+n+".slack.com/beacon/statsd"}else t=location.host.match(/staging.slack.com/)?"https://staging.slack.com/beacon/statsd":"https://slack.com/beacon/statsd";return t};var i=function e(t){if(!t)return TS.qs_args.log_timings||true===TS.statsd.log;return TS.qs_args.log_timings||TS.qs_args.log_timing===t||true===TS.statsd.log||TS.statsd.log===t||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(t)}})()},3081:function(e,t){(function(){TS.registerModule("model",{did_we_load_with_user_cache:false,did_we_load_with_emoji_cache:false,did_we_load_with_app_cache:false,did_we_load_with_cmd_cache:false,api_url:"",api_token:"",async_api_url:"",webhook_url:"",user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_channel_joins:{},archives_and_recreated_groups:{},last_team_name:"",initial_cid:"",enterprise:null,initial_unread_view:false,initial_threads_view:false,initial_app_space_view:false,initial_search_view:false,RESERVED_KEYWORDS:["channel","here","everyone","slackbot","siackbot","canal","aqu\xed","todos","hier","alle","cha\xeene","chaine","ici","tous","\u30c1\u30e3\u30f3\u30cd\u30eb","\u3053\u3053","\u5168\u54e1"],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.interop.i18n.t("All Unreads","model")(),is_view:true},{id:"Vall_threads",name:TS.interop.i18n.t("Threads","threads")(),alt_names:[TS.boot_data.feature_threads_copy_change?TS.interop.i18n.t("Threads","threads")():TS.interop.i18n.t("All Threads","threads")(),TS.interop.i18n.t("New Threads","threads")()],is_view:true},{id:"Vapp_space",name:TS.interop.i18n.t("Apps","model")(),is_view:true}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,last_reads_set_by_client:{},ms_logged_in_once:false,ds_asleep:false,ds_connected:false,ds_connecting:false,ds_logged_in_once:false,window_unloading:false,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],user_colors:{},emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,your_user_group_regex:{},channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:false,ds_reconnect_ms:0,ds_reconnect_time:0,rtd_start_throttler:0,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:false,threads_mention_count:0,threads_mention_counts:{},c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps","calendar"],default_flex_name:"files",ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:TS.boot_data.feature_longer_channel_names?80:21,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,archive_view_is_showing:false,menu_is_showing:false,overlay_is_showing:false,unread_view_is_showing:false,threads_view_is_showing:false,app_space_view_is_showing:false,search_view_is_showing:false,seen_onboarding_this_session:false,seen_welcome_2:true,showing_welcome_2:false,cancelled_welcome_2_this_session:false,show_inline_img_size_pref_reminder:false,shown_inline_img_size_pref_reminder_once:false,last_key_down_e:null,group_prefix:"",ms_conn_log:[],ds_conn_log:[],mac_ssb_version:TS.interop.environment.mac_ssb_version,mac_ssb_version_minor:TS.interop.environment.mac_ssb_version_minor,mac_ssb_build:TS.interop.environment.mac_ssb_build,win_ssb_version:TS.interop.environment.win_ssb_version,win_ssb_version_minor:TS.interop.environment.win_ssb_version_minor,lin_ssb_version:TS.interop.environment.lin_ssb_version,lin_ssb_version_minor:TS.interop.environment.lin_ssb_version_minor,desktop_app_version:TS.interop.environment.desktop_app_version,supports_downloads:false,supports_spaces_in_windows:false,supports_growl_subtitle:false,supports_voice_calls:false,supports_video_calls:false,supports_screen_sharing:false,supports_screenhero:false,supports_mmap_minipanel_calls:false,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:false,insert_key_pressed:false,alt_key_pressed:false,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.interop.i18n.t("All File Types","model")(),posts:TS.interop.i18n.t("Posts","model")(),spaces:TS.interop.i18n.t("Posts","model")(),docs:TS.interop.i18n.t("Posts","model")(),snippets:TS.interop.i18n.t("Snippets","model")(),emails:TS.interop.i18n.t("Emails","model")(),images:TS.interop.i18n.t("Images","model")(),videos:TS.interop.i18n.t("Videos","model")(),pdfs:TS.interop.i18n.t("PDF Files","model")(),spreadsheets:TS.interop.i18n.t("Spreadsheets","model")(),gdocs:TS.interop.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:true,ampersands_are_inconsistent_in_from_urls:true,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!!(document.hasFocus&&document.hasFocus()),is_mouse_down:false,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:true,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_map_by_id:{},emoji_complex_customs:null,frecency_jumper:{},pdf_viewer_enabled:true,onStart:function e(){var t=[];TS.model.is_electron&&TS.model.is_mac&&TS.interop.desktop.isMainWindowFrameless()&&t.push("is_electron_mac");TS.model.is_electron&&t.push("is_electron");$("html").addClass(t.join(" "));TS.model.supports_growl_subtitle=!!(TS.model.mac_ssb_version&&TS.interop.environment.isSSBAndAtLeastVersion("2.2"));var n=false;Object.defineProperty(TS.model,"dialog_is_showing",{get:function e(){return n},set:function e(t){n=t},enumerable:true,configurable:true});TS.model.supports_voice_calls=TS.model.is_our_app&&TS.interop.environment.isSSBAndAtLeastVersion("2.5.2")||TS.model.is_chrome_desktop;TS.model.supports_video_calls=TS.model.supports_voice_calls;TS.model.supports_screen_sharing=TS.model.is_our_app&&TS.model.supports_voice_calls;TS.model.supports_screenhero=false;TS.model.supports_mmap_minipanel_calls=false;if(window.desktop&&desktop.calls&&desktop.calls.requestCapabilities){var r=desktop.calls.requestCapabilities();if(r){r.supports_screenhero&&!r.is_mas&&(TS.model.supports_screenhero=true);r.supports_mmap_minipanel&&(TS.model.supports_mmap_minipanel_calls=true)}}TS.model.supports_spaces_in_windows=false;window.desktop&&desktop.window&&desktop.window.list&&(TS.model.supports_spaces_in_windows=true);TS.boot_data.special_flex_panes&&_.forOwn(TS.boot_data.special_flex_panes,function(e){TS.model.flex_names.push(e.flex_name)});var o=TS.storage.fetchExpandableState();TS.model.expandable_state=o;Object.defineProperty(TS.model,"active_cid",{get:function e(){var t=TS.interop.workspace.getPrimaryView();return TS.interop.utility.looksLikeChannelId(t)?t:null},set:function e(){return false}});Object.defineProperty(TS.model,"active_channel_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_channel&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"active_im_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_im&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"active_group_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_group&&!n.is_mpim&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"active_mpim_id",{get:function e(){var t=TS.interop.workspace.getPrimaryView();var n=TS.redux.channels.getEntityById(t,false);return n&&n.is_mpim&&n.is_group&&n.id||null},set:function e(){return false}});Object.defineProperty(TS.model,"unread_view_is_showing",{get:function e(){return TS.interop.utility.PRIMARY_VIEWS.allUnreads===TS.interop.workspace.getPrimaryView()},set:function e(){return false}});Object.defineProperty(TS.model,"threads_view_is_showing",{get:function e(){return TS.interop.utility.PRIMARY_VIEWS.allThreads===TS.interop.workspace.getPrimaryView()},set:function e(){return false}});Object.defineProperty(TS.model,"search_view_is_showing",{get:function e(){return TS.interop.utility.PRIMARY_VIEWS.search===TS.interop.workspace.getPrimaryView()},set:function e(){return false}})},addProfilingKeyTime:function e(t,n){if(!n||!t)return;TS.model.profiling_key_times||(TS.model.profiling_key_times=[]);TS.model.profiling_key_times.push({name:t,ms:n})},incrementUnknownIdHandled:function t(n){e[n]=e[n]||{tries:0,state:0};var r=e[n];r.tries+=1;r.state=0;r.tries>2?TS.maybeError(48,'calling the API for id: "'+n+'", try #'+r.tries):r.tries>1?TS.maybeWarn(48,'calling the API for id: "'+n+'", try #'+r.tries):TS.log(48,'calling the API for id: "'+n+'", try #'+r.tries);return r.tries},reportResultOfUnknownIdHandled:function t(n,r){var o=e[n];if(!o)return;o.state=r?1:-1;1==o.state?TS.log(48,'API call for id: "'+n+'" SUCCEEDED, try #'+o.tries):TS.maybeWarn(48,'API call for id: "'+n+'" FAILED, try #'+o.tries)},logUnknownIdsHandled:function e(t,r){var o=n(t,r);TS.info("_unknown_ids_handled: "+JSON.stringify(o,null,2))},getUnknownIdsHandled:function e(t,r){return n(t,r)},test:function e(){return{getOSXVersion:o,isWin7Plus:r,sniffUserAgent:a}},getBroadcastKeywordById:function e(t){var n=_.find(TS.interop.broadcast_keywords.getAllBroadcastKeywords(),{id:t});if(!n){TS.warn("no broadcast_keyword ob found for "+t);return}return n},getViewById:function e(t){var n=_.find(TS.model.NAMED_VIEWS,{id:t});if(!n){TS.warn("no view ob found for "+t);return}return n},isSSB:function e(){return TS.model.is_our_app},legacyGetYourUserGroupRegExp:function e(){return TS.model.your_user_group_regex}});_.merge(TS.model,a(navigator.userAgent));var e={};var t=[-1,0,1];var n=function n(r,o){r=parseInt(r,10)||1;o=_.includes(t,o)?o:"any";var a={};Object.keys(e).forEach(function(t){var n=e[t];if(r>n.tries)return;if("any"!==o&&n.state!=o)return;a[t]=e[t]});return{state:o,min_tries:r,count:Object.keys(a).length,obs:a}};function r(e){var t=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);if(!t||t.length<2)return false;return parseInt(t[1],10)>=6}function o(e){var t=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);t||(t=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/));if(!t||!t[1])return 0;return t[1].replace("_",".")}function a(e){var t=/(OS X)/g.test(e);var n=-1!==e.indexOf("Windows");var a=/(WOW64|Win64)/g.test(e);var i=-1!==e.indexOf("Linux");var s=-1!==e.indexOf("CrOS");var l=/(iPad|iPhone|iPod)/g.test(e);var c=/(Android)/g.test(e);var _=/(Edge)/g.test(e);var u=/(Chrome)/g.test(e)&&!_;var d=u&&(l||c);var f=/(Slack)/g.test(e);var m=/(MSIE|Trident)/g.test(e);var p=/(Firefox)/g.test(e);var g=/(Safari)/g.test(e);var S=/(AtomShell)/g.test(e);return{is_iOS:l,is_IE:m,is_FF:p,is_edge:_,is_chrome_desktop:u&&!d&&!f,is_chrome_mobile:d,is_safari_desktop:g&&!u&&t&&!l,is_mac:t,mac_version:o(e)||void 0,is_win:n,is_win_64:a,is_win_7_plus:r(e),is_lin:i,is_cros:s,is_our_app:f,is_electron:S}}})()},3082:function(e,t){(function(){TS.registerModule("environment",{is_apple_webkit:false,is_dev:false,is_retina:false,retina_changed_sig:new signals.Signal,supports_sticky_position:false,supports_custom_scrollbar:false,slim_scrollbar:false,supports_line_clamp:false,supports_intersection_observer:false,onStart:function e(){c();a();u()},doesSupportStickyPosition:function e(){return TS.environment.supports_sticky_position},test:function e(){var t={_decoratePageWithSupport:a,_initialSetup:c};Object.defineProperty(t,"cssPropertySupported",{get:function e(){return i},set:function e(t){i=t}});Object.defineProperty(t,"cssValueSupported",{get:function e(){return s},set:function e(t){s=t}});return t}});var e=["-webkit-","-moz-","-o-","-ms-",""];var t=["Webkit","Moz","O","ms",""];var n=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")");var r=new RegExp("^("+t.slice(0,t.length-1).join("|")+")");function o(){return window.devicePixelRatio>1}function a(){var e=["is_apple_webkit","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_line_clamp"];var t=_.partition(e,function(e){return TS.environment[e]});var n=$("html");n.addClass(t[0].join(" "));n.removeClass(t[1].join(" "))}function i(e){if("scrollbar"===e)return d();var o=document.createElement("css_property_supported").style;e=e.replace(r,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(n,"").toLowerCase();e=_.camelCase(e,"-");var a=_.upperFirst(e);if(void 0!==o[e])return true;return t.some(function(t){return void 0!==o[t+a]||void 0!==o[t+e]})}function s(t,r){var o=document.createElement("css_value_supported");r=r.replace(n,"").toLowerCase();o.style.cssText=t+":"+e.join(r+";"+t+":")+r+";";return!!o.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky");"Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&o()&&(TS.environment.supports_sticky_position=false);TS.redux.dispatch(TS.interop.redux.models.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!!(TS.model.mac_ssb_version||TS.model.is_safari_desktop);TS.environment.is_dev="dev"===TS.boot_data.version_ts;TS.environment.is_retina=o();TS.environment.supports_custom_scrollbar=i("scrollbar");TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar;TS.environment.supports_line_clamp=i("line-clamp");TS.environment.supports_intersection_observer="function"===typeof IntersectionObserver;l()}function u(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener(function(){var e=TS.environment.is_retina;TS.environment.is_retina=o();if(TS.environment.is_retina===e)return;TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina);TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina);l();a()})}}function d(){var e=document.createElement("div");e.id="__sb";e.style.overflow="scroll";e.style.width="40px";e.style.height="40px";e.style.position="absolute";e.style.left="-40px";e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>";document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth===10;document.body.removeChild(e);return t}})()},3083:function(e,t){(function(){TS.registerModule("ssb",{onStart:function e(){TS.files&&TS.files.team_file_deleted_sig.add(r)},openNewFileWindow:function e(t,r,a){i&&TS.log(i,"TS.ssb.openNewFileWindow url: "+r);if(TS.client)return TS.client.windows.openFileWindow(t.id,a);if(window.is_in_ssb){TS.ssb.upsertFileInSSBParentWin(t);if(document.ssb_main){if(document.ssb_main.TS)return document.ssb_main.TS.client.windows.openFileWindow(t.id,r);return true}if(window.desktop&&window.opener&&window.opener.executeJavaScript){i&&TS.log(i,"calling _executeInAtomSSBParentWin for TS.client.windows.openFileWindow");o("TS.client.windows.openFileWindow("+n(t.id)+", "+n(r)+");");return true}}return false},closeWindow:function e(){if(!window.is_in_ssb)return false;window.close();return true},setUpAtomSSBWin:function e(t){a(t,"window.is_in_ssb = true;");TS.shouldLog(438)&&!t._has_console&&(t._has_console=1)},upsertFileInSSBParentWin:function e(n){if(!TS.web)return;if(document.ssb_main)document.ssb_main.TS&&document.ssb_main.TS.files.upsertAndSignal(n,"upsertFileInSSBParentWin");else if(window.desktop&&window.opener&&window.opener.executeJavaScript){i&&TS.log(i,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal");o("TS.files.upsertAndSignal("+t(n)+");")}},toggleMuteInWin:function t(n,r,o){i&&TS.log(i,"toggleMuteInWin called with token: "+n);if(!TS.client)return;var s=TS.client.windows.getWinByToken(n);if(!s){TS.error("toggleMuteInWin called with bad token: "+n);return}a(s,"window.toggleMute("+e(r)+");",o)},distributeMsgToWin:function e(n,r){i&&TS.log(i,"distributeMsgToWin called with token: "+n);if(!TS.client)return;var o=TS.client.windows.getWinByToken(n);if(!o){TS.error("distributeMsgToWin called with bad token: "+n);return}a(o,"TS.redux.dispatch(TS.interop.redux.features.socket.socketMessageReceived(("+t(r)+"));")}});var e=function e(t){return(!!t).toString()};var t=function e(t){return"JSON.parse('"+JSON.stringify(t||null)+"')"};var n=function e(t){t=String(t);t=t.replace(/"/g,'\\"');return'"'+t+'"'};var r=function e(t){if(!t)return;if(!TS.client)return;var r=TS.client.windows.getWinByProp("file_id",t.id);if(!r)return;setTimeout(function(){a(r,"window.TS.files.team_file_deleted_sig.dispatch(TS.files.getFileById("+n(t.id)+"));")},1e3)};var o=function e(t,n){return TS.interop.desktop.executeJavaScriptInParentWindow({code:t,callback:n})};var a=function e(t,n,r){return TS.interop.desktop.executeJavaScriptInWindow({window_token:t.token,code:n,callback:r})};var i=438})()},3084:function(e,t){(function(){TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function e(){$(window).bind("focus",TS.ui.onWindowFocus);$(window).bind("blur",TS.ui.onWindowBlur);$("html").bind("mousedown",function(){TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Mousedown while !is_window_focused");TS.ui.onWindowFocus({target:window})});var n=!!(document.hasFocus&&document.hasFocus());n?TS.ui.onWindowFocus({target:window}):TS.ui.onWindowBlur({target:window});TS.model.win_ssb_version&&$("body").addClass("desktop");t()},setUpWindowUnloadHandlers:function e(){"undefined"!==typeof window.addEventListener?window.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof document.addEventListener?document.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof window.attachEvent?window.attachEvent("onbeforeunload",TS.ui.onWindowUnload):"function"===typeof window.onbeforeunload?window.onbeforeunload=function(){TS.ui.onWindowUnload();return false}:window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function e(){TS.client&&TS.client.markLastReadsWithAPI();TS.model.window_unloading=true;TS.ui.window_unloaded_sig.dispatch();TS.redux.dispatch(TS.interop.redux.models.window.setUnloading(true))},handleDraghoverstartFromWinSSB:function e(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function e(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function e(t){TS.ui.file_share.handleDropFromWinSSB(t)},teamSelectionChanged:function e(){if(!window.desktop||!window.desktop.reduxHelper||!_.isFunction(window.desktop.reduxHelper.isSelectedTeam))return;if(TS.interop.environment.isSSBAndAtLeastVersion("3.2.0"))return;var t=window.desktop.reduxHelper.isSelectedTeam();TS.interop.console.info("FOCUS-EVENT","Team selection changed ("+t+")");t?n():r()},onWindowFocus:function e(t){if(t.target!==window&&t.target!==document)return;TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Window focused");n()},onWindowBlur:function e(t){if(t.target!==window&&t.target!==document)return;TS.model.ui.is_window_focused&&TS.interop.console.info("FOCUS-EVENT","Window blurred");r()},needToShowAtChannelWarning:function e(t,n){if(TS.boot_data.feature_modern_file_upload)return TS.interop.rules.channels.shouldShowAtChannelWarning(t,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(n,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})));var r;var o=TS.format.cleanMsg(n);var a=TS.interop.messages.atEveryoneRegExp.test(o);var i=TS.interop.messages.atChannelRegExp.test(o);var s=TS.interop.messages.atGroupRegExp.test(o);var l=!!TS.prefs.getPref("last_seen_at_channel_warning");var c=new Date(TS.prefs.getPref("last_seen_at_channel_warning"));var _=l&&TS.interop.datetime.isSameDay(c,new Date);if(!a&&!i&&!s)return false;r=TS.redux.channels.getEntityById(t);if(!r||r.is_im)return false;if((i||s)&&!TS.permissions.members.canAtChannelOrGroup(r.id))return false;if(r.is_general&&a&&!TS.permissions.members.canAtMentionEveryone(r.id))return false;if("never"===TS.prefs.getTeamPref("warn_before_at_channel"))return false;if("once"===TS.prefs.getTeamPref("warn_before_at_channel")&&l)return false;if("daily"===TS.prefs.getTeamPref("warn_before_at_channel")&&_)return false;return true},needToBlockAtChannelKeyword:function e(t,n,r){if(TS.boot_data.feature_modern_file_upload)return TS.interop.rules.channels.checkForBlockedAtChannelKeyword(r,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(t,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})));if(TS.interop.utility.looksLikeMemberId(r))return false;var o=TS.format.cleanMsg(t);var a=r&&TS.redux.channels.getEntityById(r);var i=a&&!a.is_im&&!a.is_mpim||n&&(n.channels.length||n.groups.length);if(!i)return false;var s=TS.interop.messages.atEveryoneRegExp.test(o);var l=TS.interop.messages.atHereRegExp.test(o);var c=TS.interop.messages.atChannelRegExp.test(o);var _=TS.interop.messages.atGroupRegExp.test(o);var u=false;if(a)u=!!a.is_general;else if(n&&0===n.groups.length&&1===n.channels.length){var d=TS.interop.channels.getPublicChannelById(n.channels[0]);u=!!d.is_general}if(TS.boot_data.feature_file_threads&&!u&&s)return"@everyone";if(u&&s&&!l&&!c&&!_&&TS.permissions.members.canAtMentionEveryone(r))return false;if(!TS.permissions.members.canAtChannelOrGroup(r)){if(l)return"@here";if(c)return"@channel";if(_)return"@group";if(s)return"@everyone"}var f=a&&a.is_general;!f&&n&&n.channels&&n.channels.forEach(function(e){var t=TS.interop.channels.getPublicChannelById(e);t&&t.is_general&&(f=true)});if(f&&!TS.permissions.members.canAtMentionEveryone(r)&&(s||l||_||c)){if(TS.boot_data.feature_file_threads){if(l)return"@here";if(c)return"@channel";if(_)return"@group";if(s)return"@everyone"}return"@everyone"}return false},startButtonSpinner:function t(n){TS.ui.resetButtonSpinner(n);var r=e(n);r.isLoading()||r.start()},stopButtonSpinner:function t(n,r){var o=e(n);if(o.isLoading()){o.stop();if(r){var a=$(n).find(".ladda-label").text();$(n).data("original_text",a);$(n).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.interop.i18n.t("Saved","ui")())}}},resetButtonSpinner:function t(n){var r=e(n);if(r.isLoading())return;var o=$(n).data("original_text");if(o){$(n).find(".ladda-label").text(o);$(n).removeData("original_text");$(n).removeClass("btn_success").addClass("")}},showVersionInfo:function e(){var t="version_info";var n=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.interop.i18n.t("Version Info","ui")(),unique:t,body:TS.interop.i18n.t('<p>This version: {version_num}</p><p class="latest_version checking">Checking for updates&hellip;</p>',"ui")({version_num:TS.interop.i18n.safeString(n)}),show_cancel_button:false,go_button_class:"btn_outline",go_button_text:TS.interop.i18n.t("Close","ui")(),show_secondary_go_button:false,onSecondaryGo:function e(){TS.reload(false,"TS.ui.showVersionsInfo dialog")}});TS.interop.api.callExpedited("test.versionInfo").then(function(e){if(!TS.generic_dialog.is_showing||TS.generic_dialog.current_setting.unique!=t)return;var n=TS.generic_dialog.div.find(".latest_version");n.removeClass("checking");var r=e.data.version_ts.toString()==TS.boot_data.version_ts.toString();if(r)n.html(TS.interop.i18n.t("Your copy of Slack is up-to-date! {tada_emoji}","ui")({tada_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":tada:"))}));else{TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update");var o=e.data.min_version_ts>TS.boot_data.version_ts;o?n.html(TS.interop.i18n.t("An important new version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))})):n.html(TS.interop.i18n.t("A newer version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))}))}}).catch(_.noop)},setThemeClasses:function e(){$("body").removeClass("dense_theme light_theme");if("dense"===TS.prefs.getPref("theme"))$("body").addClass("dense_theme");else{if("light"!==TS.prefs.getPref("theme")){TS.error("no theme?");return}$("body").addClass("light_theme")}TS.prefs.getPref("avatars")?$("body").removeClass("no_avatars"):$("body").addClass("no_avatars")}});var e=function e(t){var n=$(t).data("ladda");if(!n){n=Ladda.create(t);$(t).data("ladda",n)}return n};var t=function e(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var t=$(e.target);if(!t.pickmeup)return;var n=!!t.closest("#fs_modal").length||$(this).data("flat");t.pickmeup({flat:n,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:true,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function e(){t.trigger("input")},title_format:"ja-JP"===TS.interop.i18n.locale?"Y\u5e74B":"B Y",locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show");if(n){var r=t.data("picker");if(!r){r=$('<div class="position_relative no_margin no_padding"></div>');t.data("picker",r)}t.after(r.append(t.find(".pickmeup").detach()))}}).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var t=$(e.target);if(!t.pickmeup)return;window.document.activeElement===e.target&&t.pickmeup("hide")})};var n=function e(){var t=TS.interop.redux.models.window.isWindowFocused(TS.redux.getState());if(t)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=true;TS.ui.window_focus_changed_sig.dispatch(true);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(true))};var r=function e(){var t=TS.interop.redux.models.window.isWindowFocused(TS.redux.getState());if(false===t)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=false;TS.ui.window_focus_changed_sig.dispatch(false);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(false))}})()},3085:function(e,t){(function(){TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function e(){$(window).trigger("draghoverstart",[null,true])},handleDraghoverendFromWinSSB:function e(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function e(t){TS.info("handleDropFromWinSSB called files:"+t);$("body").removeClass("drop-target");if(TS.client.ui.checkForEditing())return;if(!t||!t.length){TS.warn("handleDropFromWinSSB called with no files");return}TS.client.ui.files.validateFiles(t,TS.model.shift_key_pressed)},preselected:[],bindFileShareDropdowns:function r(i,s,l,c){var u=$("#select_share_channels");var d="60%";TS.web&&TS.web.space&&(d="100%");if(1!=u.length){alert("error: "+u.length+" $('#select_share_channels')s");return}TS.ui.file_share.preselected=l||[];t=s;n=i;var f=TS.ui.file_share.promiseToGetFileShareSelectOptions;c&&(f=a);e={append:true,single:true,data_promise:f,approx_item_height:30,tab_to_nav:true,placeholder_text:TS.interop.i18n.t("Search channels and people ...","files"),template:function e(t){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:t.model_ob}))},onItemAdded:o,onListHidden:function e(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function e(t,n){if(n.create_channel){t.html(TS.interop.i18n.t('<span class="new">No items matched <strong>{query}</strong></span>',"files")({query:TS.interop.i18n.safeString(_.escape(n.label))}));$("#select_share_channels .lfs_list_container").addClass("new_channel_container");return}$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");t.html(_.escape(n.label)).removeClass("new_channel_not_found")},setValue:function e(t){var n;var r;var o=this.data.length;var a;for(n=0;n<o;n+=1){a=this.data[n].children.length;for(r=0;r<a;r+=1)if(this.data[n].children[r].model_ob.id===t){this.$container.find('.lfs_item[data-lfs-id="'+[n,r]+'"]').trigger("click");return}}}};u.lazyFilterSelect(e);u.css({width:d});u.one("remove",function(){n=false;$(this).lazyFilterSelect("destroy")});$("#file_sharing_div").on("keydown",function(e){13==e.keyCode&&e.stopPropagation()});u.lazyFilterSelect("getInstance").current_items_in_view_signal.add(function(e){var t=e.filter(function(e){return e.model_ob&&Object.prototype.hasOwnProperty.call(e.model_ob,"presence")}).map(function(e){return e.model_ob.id});TS.presence_manager.queryMemberPresence(t)})},promiseToGetFileShareSelectOptions:function e(t){var r=i();return TS.searcher.search(t,{members:{include_self:true},channels:{include_archived:false,can_post:true},groups:{include_archived:false},mpims:true,sort:{allow_empty_query:true}}).then(function(e){var o=false;e.all_items_fetched=true;e.filter(function(e){return TS.interop.utility.looksLikeMemberId(e.model_ob.id)?TS.permissions.members.canUserSeeMember(e.model_ob):TS.permissions.members.canPostInChannel(e.model_ob)}).forEach(function(e){e.lfs_id=e.model_ob.id;e.preselected=s(e.model_ob.id,r);e.preselected&&(o=true)});var a=false;r&&(TS.interop.utility.looksLikeMemberId(r)?a=TS.redux.channels.getImByMemberId(r):TS.interop.utility.looksLikeChannelId(r)&&(a=TS.redux.channels.getEntityById(r)));if(!t&&!o&&a)if(_.get(a,"is_im")){var i=TS.interop.members.getMemberById(a.user);e.push({preselected:true,lfs_id:i.id,model_ob:i})}else a&&TS.permissions.members.canPostInChannel(a)&&e.push({preselected:true,lfs_id:a.id,model_ob:a});if(a){TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(n,a);l(a)}var c=_(e).map("model_ob").filter(function(e){return _.get(e,"id")}).filter(TS.interop.utility.looksLikeMemberId).compact().value();TS.presence_manager.queryMemberPresence(c);return e})},bindFileShareShareToggle:function e(){$("#share_cb").bind("click.toggle_select_list",function(){$(this).prop("checked")?$(".file_share_select").prop("disabled",false):$(".file_share_select").prop("disabled",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},bindFileShareCommentField:function e(){$("#file_comment_textarea").bind("keyup",function(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},updateAtChannelWarningNote:function e(t){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var o;var a=$("#select_share_channels").lazyFilterSelect("value")[0];var i;a&&(o=a.model_ob.id||"");var s=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(o,n)){var l=TS.format.cleanMsg(n);var c="";var u=true;TS.interop.messages.atEveryoneRegExp.test(l)?c="everyone":TS.interop.messages.atChannelRegExp.test(l)?c="channel":TS.interop.messages.atGroupRegExp.test(l)&&(c="group");var d=TS.redux.channels.getEntityById(o);d&&!d.is_im||(u=false);if(u&&!r(d)&&!t){var f=TS.interop.memberCounts.getOrFetchMemberCounts(d.id);if(f.promise){i=0;f.promise.then(TS.ui.file_share.updateAtChannelWarningNote);u=false}else{i=_.get(f,"counts.member_count",1);i-=1}}var m=[];if(_.isUndefined(i)&&u&&d&&!d.is_im){m=_(d.members).map(function(e){return TS.interop.members.getMemberById(e)}).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.interop.members.memberSorterByName).value();m.length<1&&(u=false)}if(u){var p=TS.templates.at_channel_warning_note({keyword:c,member_count:_.isUndefined(i)?m.length:i});s.html(p);s.removeClass("hidden");return}}s.addClass("hidden")},updateAtChannelBlockedNote:function e(){var t=TS.utility.contenteditable.value($("#file_comment_textarea"));var n;var r=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var a=0===o.length||o.is(":checked");r&&a&&(n=r.model_ob.id);var i=$("#select_share_at_channel_blocked_note");var s=$(".modal .btn.dialog_go");var l;TS.interop.utility.looksLikeMemberId(n)||(l=TS.ui.needToBlockAtChannelKeyword(t,null,n));if(l){i.html(TS.templates.at_channel_blocked_note({keyword:l}));i.removeClass("hidden");s.addClass("disabled")}else{i.addClass("hidden");s.removeClass("disabled")}},shouldBlockUploadDialogSubmission:function e(){var t=TS.utility.contenteditable.value($("#file_comment_textarea"));var n;var r=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var a=0===o.length||o.is(":checked");r&&a&&(n=r.model_ob.id);var i;TS.interop.utility.looksLikeMemberId(n)||(i=TS.ui.needToBlockAtChannelKeyword(t,null,n));if(i){TS.info("Can't submit dialog because comment contains "+i);return true}return false},fileShowPublicUrlDialog:function e(t){var n=c(t);if(!n||!n.public_url_shared)return;var r=$('<input type="text" id="public_url" class="full_width small">').attr("value",n.permalink_public)[0].outerHTML;var o;o=TS.boot_data.feature_external_files?TS.interop.i18n.t('External link to this file <p style="display: inline-block;font-weight: 400"> (shareable with anyone) </p>',"files")():TS.interop.i18n.t("Public link to this file","files")();TS.generic_dialog.start({title:o,body:r,show_cancel_button:false,show_close_button:true,show_secondary_go_button:true,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.interop.i18n.t("Revoke","files")(),show_go_button:true,go_button_text:TS.interop.i18n.t("Done","files")(),esc_for_ok:true,onSecondaryGo:function e(){TS.ui.file_share.fileRevokePublicLink(n.id)},onGo:function e(){TS.generic_dialog.cancel()},onShow:function e(){TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);$("#public_url").select().focus().on("keydown",function(e){e.which==TS.utility.keymap.esc&&TS.generic_dialog.cancel()})})}})},fileRevokePublicLink:function e(t){var n=TS.files.getFileById(t);if(!n)return false;var r;var o;if(TS.boot_data.feature_external_files){r=TS.interop.i18n.t("Revoke external file link","files")();o='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the external link for this file. Any previously shared links will stop working.<br /><br />Are you sure you want to revoke this link?","files")()+"</p>"}else{r=TS.interop.i18n.t("Revoke public file link","files")();o='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the Public Link for this file. This will cause any previously shared links to stop working.<br /><br />Are you sure you want to revoke this public link?","files")()+"</p>"}TS.generic_dialog.start({title:r,body:o,go_button_text:TS.interop.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function e(){TS.files.upsertAndSignal({id:n.id,public_url_shared:false},"revokePublicLink");TS.interop.api.callExpedited("files.revokePublicURL",{file:n.id})}})},test:function e(){var e={};Object.defineProperty(e,"_author",{get:function e(){return n},set:function e(t){n=t}});Object.defineProperty(e,"_populateDisabledInputMsg",{get:function e(){return l},set:function e(t){l=t}});Object.defineProperty(e,"_haveAllMembersForModelOb",{get:function e(){return r},set:function e(t){r=t}});return e}});var e={};var t=false;var n=false;var r=function e(t){if(t.is_channel&&!t.is_group)return false;var n=t.members||[t.user];var r=_.map(TS.model.members,"id");return!_.difference(n,r).length};var o=function e(t){$("#select_share_channels .lfs_input_container").removeClass("error");if(t.model_ob.create_channel){$("#select_share_channels_note").removeClass("hidden");$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Next","files")());TS.metrics.count("share_picker_create_clicked");return}$("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Share","files")());var r;r=t.model_ob.id;if(!r)return;$("#share_model_ob_id").val(r);$("#select_share_channel_warning, #select_share_channels_join_note").addClass("hidden");var o=t.model_ob||{};TS.interop.utility.looksLikeMemberId(o.id)&&(o=TS.redux.channels.getImByMemberId(o.id)||o);TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(n,o);l(o);var a=TS.interop.rules.channels.isExternallySharedChannel(o)||n&&TS.interop.members.isExternal(n);if(a){$('label[for="file_comment_textarea"]').addClass("subtle_silver");TS.utility.contenteditable.disable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").addClass("subtle_silver")}else{$('label[for="file_comment_textarea"]').removeClass("subtle_silver");TS.utility.contenteditable.enable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").removeClass("subtle_silver")}if(TS.interop.rules.channels.isExternallySharedChannel(o)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(o)&&o.shared_team_ids&&o.shared_team_ids.length){$("#select_share_channel_warning").removeClass("hidden");var i=TS.interop.i18n.safeString(TS.interop.i18n.listify(_.map(o.shared_team_ids,TS.teams.getTeamNameById)).join(""));$("#select_share_channel_warning_text").html(TS.interop.i18n.t("<strong>This is a shared channel.</strong> Messages and files sent here will be seen by members of <strong>{shared_teams_list}</strong>.","shared_channels")({shared_teams_list:i}))}if(o.is_im||o.is_mpim)$("#share_context_label").text(TS.interop.i18n.t("Share with","files")());else{$("#share_context_label").text(TS.interop.i18n.t("Share in","files")());o.is_channel&&!o.is_member&&$("#select_share_channels_join_note").removeClass("hidden")}$("#share_cb").prop("checked",true);if(!a){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()}};var a=function e(t){return TS.ui.file_share.promiseToGetFileShareSelectOptions(t).then(function(e){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");if(0===e.length){var n=TS.utility.channels.getPermissibleChannelName(t);if(n){e.push({lfs_group:true,label:t,create_channel:true,children:[{lfs_id:"c."+n,model_ob:{create_channel:true,name:n}}]});$("#select_share_channels .lfs_list_container").addClass("new_channel_container");TS.metrics.count("share_picker_create_shown")}}return e})};var i=function e(){if(TS.client&&TS.client.activeChannelIsHidden()){if(t)return t.id}else{var n=TS.shared.legacyGetActiveModelOb();if(n)return n.id}if(TS.web&&TS.web.space)return TS.web.space.getOriginChannel();return null};var s=function e(t,n){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(t)>-1:t===n};var l=function e(t){if(!_.isObject(t))return;TS.interop.utility.looksLikeMemberId(t.id)&&(t=TS.redux.channels.getImByMemberId(t.id)||t);var r="";r=n&&TS.interop.members.isExternal(n)?TS.interop.i18n.t("Only members of {team_name} can comment on this file.","shared_channels")({team_name:TS.teams.getTeamNameByMember(n)}):t.is_channel||t.is_group?TS.interop.i18n.t("Comments are disabled in shared channels.","shared_channels")():TS.interop.i18n.t("Comments are disabled when sharing with another\xa0workspace.","shared_channels")();$("#file_comment_textarea").attr("data-disabled-text",r)};var c=function e(t){return _.isString(t)?TS.files.getFileById(t):t}})()},3693:function(e,t,n){"use strict";n.r(t);var r=n(40);var o=n.n(r);(function(){var e=function e(t,n){var r=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none");var o=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none");var a={description:n,error_json:JSON.stringify(t),team:r,user:o,version:TS.boot_data.version_ts};$.post(TS.boot_data.beacon_error_url,a)};var t=function e(t,n,r){if(!window.console||!console[t])return;var o=TS.qs_args.clean_log;var i=null!==n;r=Array.prototype.slice.call(r);if(i){if(!TS.console.shouldLog(n))return;r.splice(0,1)}r=_.map(r,function(e){return a(e)});var s=true;var l=r.length;while(s&&l){l-=1;s="string"===typeof r[l]}if(o&&"error"!==t&&(n!==parseInt(TS.qs_args.pri,10)||!i))return;if(s){var c=TS.makeLogDate();i&&!o&&(c+="[** "+n+" **]");r.unshift(c);console[t](r.join(" "))}else console[t].apply(console,r)};window.TS||(window.TS={});TS.console={onStart:function e(){TS.console.setAppropriatePri(true);TS.console.watchForErrors()},count:function e(){t("count",null,arguments)},dir:function e(t,n,r){if(!window.console||!console.dir)return;if(t&&!TS.shouldLog(t))return;r=r||"";n=a(n);var o=parseInt(TS.qs_args.dir_json,10);if(o){var i=1==o?"2000":o;try{var s=JSON.stringify(n,null,"  ");if(s.length>i)throw new Error("too long");console.info(TS.makeLogDate()+"[** "+t+" **] "+r+" "+s);return}catch(e){if("too long"!==e){console.info(TS.makeLogDate()+"[** "+t+" **] "+r+" "+n);return}}}try{var l=_.cloneDeep(n);console.info(TS.makeLogDate()+"[** "+t+" **] "+r+" \ud83d\udc47");console.dir(l)}catch(e){TS.warn("could not dir ob:"+n+" err:"+e)}},error:function e(){t("error",null,arguments)},group:function e(){t("group",null,arguments)},groupCollapsed:function e(){t("groupCollapsed",null,arguments)},groupEnd:function e(){t("groupEnd",null,arguments)},maybeError:function e(n){t("error",n,arguments)},getStackTrace:function e(){var t="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path");var n=(new Error).stack;if(t){var r=new Error;var o=Promise.resolve();if(_.isFunction(o._attachExtraTrace)){o._attachExtraTrace(r);n=r.stack||"";var a=n.split("\n");if(a.length&&a.indexOf("From previous event:")>=0){var i=a.indexOf("From previous event:")+1;n=[a[0]].concat(a.slice(i)).join("\n")}}}var s;s=n?n.split&&n.split("\n")||["[could not parse stack]",n]:["no stacktrace available"];s=_.filter(s,function(e){if(0===e.indexOf("Error"))return false;return e.trim().length&&-1===e.indexOf("StackTrace")});s=_.map(s,function(e){return e.trim()});var l=s.join("\n");return l},info:function e(){t("info",null,arguments)},log:function e(n){t("log",n,arguments)},logError:function t(n,r,o,a){var i=n instanceof Error?n:new Error;var s={subtype:o||"none",message:n instanceof Error?n.message||n.description:JSON.stringify(n),fileName:i.fileName||i.sourceURL,lineNumber:i.lineNumber||i.line,stack:i.stack||i.backtrace||i.stacktrace};var l=JSON.stringify(s);e(s,r);!a&&window.console&&console.error&&console.error(TS.makeLogDate()+"logging error: "+l)},logStackTrace:function e(t){var n=_.isUndefined(t)?"":t+"\n";TS.console.info(n+"Stacktrace: \u21b4\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function t(n,r,o){if(!r||!n||_.isUndefined(o)){TS.console.warn("Invalid parameters, will not log stack trace");return}var a=TS.console.getStackTrace();var i=_.get(a.split("\n"),"[1]")||"(unknown)";TS.metrics.count(r+"_v"+o);var s={message:n+". Immediate caller: "+i,stack:a};var l=i.match(/\((.+):(\d+:\d+)\)/);if(l&&3==l.length){s.fileName=l[1];s.lineNumber=l[2]}var c=r+"_caller_v"+o;e(s,c)},profile:function e(){t("profile",null,arguments)},profileEnd:function e(){t("profileEnd",null,arguments)},replaceConsoleFunction:function e(n){var r=t;t=n;return r},setAppropriatePri:function e(t){var r="";TS.qs_args.pri&&(r+=TS.qs_args.pri);if(t&&TS.boot_data.client_logs_pri){""!==r&&(r+=",");r+=TS.boot_data.client_logs_pri}if(TS.model&&TS.prefs&&TS.prefs.prefs_loaded&&TS.prefs.getPref("client_logs_pri")){""!==r&&(r+=",");r+=TS.prefs.getPref("client_logs_pri")}""!==r&&(r+=",");r+="0";TS.pri=_.uniq(r.split(",")).join(",");n()},shouldLog:function e(t){var n=String(TS.pri).split(",");if(-1!==n.indexOf("all")||-1!==n.indexOf("*"))return true;if(-1!==n.indexOf(String(t)))return true;return"undefined"!==typeof TS.has_pri[t]},table:function e(){t("table",null,arguments)},time:function e(){t("time",null,arguments)},timeEnd:function e(){t("timeEnd",null,arguments)},timeStamp:function e(){t("timeStamp",null,arguments)},warn:function e(){t("warn",null,arguments)},maybeWarn:function e(n){t("warn",n,arguments)},watchForErrors:function e(){if(!TS.boot_data||!TS.boot_data.feature_beacon_js_errors)return;var t=true;var n=_.throttle(s,1e4);window.addEventListener("error",n,t)},trace:function e(){t("trace",null,arguments)},maybeTrace:function e(n){t("trace",n,arguments)},test:function e(){return{_maybeRedactFields:a,_windowErrorHandler:s}}};var n=function e(){var t=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter(function(e){var n=TS.boot_data.client_logs[e];return t.some(function(e){if("*"===e)return true;if(n.numbers.indexOf(parseInt(e,10))>-1)return true;if(n.name&&n.name.indexOf(e)>-1)return true;if(n.owner&&n.owner.indexOf(e)>-1)return true;return false})}).map(function(e){if(parseInt(e,10)>=0)return parseInt(e,10);return e}).keyBy(function(e){return e}).value()};var r={name:1,_name_lc:1,real_name:1,_real_name_lc:1,real_name_normalized:1,_real_name_normalized_lc:1,display_name:1,_display_name_lc:1,display_name_normalized:1,_display_name_normalized_lc:1,first_name:1,_first_name_lc:1,last_name:1,_last_name_lc:1,preferred_name:1,full_name:1,email:1,skype:1,status_text:1,title:1,src:1,text:1,msgs:1};var a=function e(t,n){if(!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts)return t;if(!t||!_.isObject(t))return t;n?n+=1:n=1;if(n>=10)return t;var o;o=_.isArray(t)?[]:{};_.each(t,function(t,a){r[a]?o[a]="[redacted "+i(t)+"]":o[a]=e(t,n)});return o};var i=function(e){var t={};return function(n){var r="undefined"===typeof n?"undefined":o()(n);if(null===n)return"null";if(n===e)return"global";if("object"!==r)return r;if(n.nodeType)return"DOM node";var a=t[r={}.toString.call(n)]||(t[r]=r.slice(8,-1).toLowerCase());return a}}(this);var s=function e(){var t=arguments&&arguments[0];var n;var r="";var o;var a=true;if(!t)return;r="";n=t.srcElement||t.target;if(n&&n.nodeName)if("SCRIPT"===n.nodeName)r=(t.type||"error")+" from script at "+n.src+" (failed to load?)";else if("IMG"===n.nodeName){TS.pri&&TS.console&&TS.console.warn&&TS.console.warn("<img> fired error with url = "+(n.src||n.currentSrc||"unkonwn"));return}t.error&&t.error.stack?r+=t.error.stack:t.filename&&(r=" from "+t.filename+(t.lineno?" @ line "+t.lineno+", col "+t.colno:""));o=(t.error&&t.error.stack?"":t.message||"")+" "+r;o&&o.replace&&(o=o.replace(/\s+/g," ").trim());if(!o||!o.length){o=n?"error event from node of "+(n.nodeName||"unknown")+", no message provided?":"error event fired, no relevant message or node found";a=false}o="\ud83d\udc1e "+o;(window.TS&&TS.console&&TS.console.error||window.console.error||function(){})(o);if(window.TS&&TS.console&&a){var i="js_runtime_error";var s=false;TS.console.logError(t.error||t,o,i,s)}n=null;o=null}})();var a=n(24);var i=n.n(a);var s=n(3);var l=n.n(s);(function(){var e=window.TS&&TS.raw_templates;var t=window.TS&&TS.raw_template_paths;var n=window.TS&&TS.templates_to_audit;var r=window.TS&&TS.console;var o=0;var a;var s;window.TSM&&window.TSM.interop||console.error("TSM.interop not found, app almost certainly will not boot properly");window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:r,ms:{},interop:window.TSM&&window.TSM.interop,boot:function e(t){TS.interop.debug.exportToGlobalDebugger("teamIds",[t.team_id]);TS.interop.debug.exportToGlobalDebugger("activeTeamId",t.team_id);TS.interop.debug.exportToGlobalDebuggerWithGetter("activeTeam",function(){return window.slackDebug[t.team_id]});I();s=new Promise(function(e){a=e});TS.boot_data=t;TS.qs_args.js_path&&(TS.boot_data.version_ts="local_js");TS.console.onStart();TS.client&&TS.client.setClientLoadWatchdogTimer();TS.model.api_url=TS.boot_data.api_url;TS.model.async_api_url=TS.boot_data.async_api_url;TS.model.api_token=TS.boot_data.api_token;TS.model.webhook_url=TS.boot_data.webhook_url;TS.boot_data.page_needs_enterprise&&(TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token);TS.interop.console.info("BOOT","booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)");TS.interop.desktop.hasDeviceStorage()&&TS.interop.environment.isSSB()&&TS.interop.desktop.setItem("shouldLogFirstMeaningfulPaint","true");TS.web&&TS.web.space&&TS.web.space.showFastPreview();TS.redux.onStart();TS.redux.onStart=_.noop;if(TS.incremental_boot.shouldIncrementalBoot()){TS.interop.console.info("BOOT","Starting incremental boot (early)");y=TS.incremental_boot.startIncrementalBoot();if(TS.boot_data.feature_degraded_send){TS.interop.console.info("BOOT","Starting data fetch (early)");k=C()}}TS.interop.clog.instance.setUser(TS.boot_data.user_id).setTeam(TS.boot_data.team_id).setEnterprise(TS.boot_data.enterprise_id).setLocale(TS.interop.i18n&&TS.interop.i18n.locale).addEventListeners().start();TS.boot_data.feature_cdn_download_test&&TS.interop.runCdnDownloadTest();$(document).ready(U)},useReactMessages:function e(){return true},useReactLFS:function e(){return TS.boot_data.feature_react_lfs},useGlobalNav:function e(){return TS.boot_data.feature_global_nav&&"treatment"===TS.interop.experiments.getGroupForUser("global_nav")},registerModule:function e(t,n,r){V(n);if(j)return TS.error('module "'+t+'" must be registered on before dom ready');if(P[t])return TS.error('module "'+t+'" already exists');var o=f(t,n,"module");if(void 0===o){r?TS.error('module "'+t+'" cannot be registered after delay; "'+t.split(".").slice(0,-1).join(".")+'" is not registered'):B[t]=n;return}n._name=t;P[t]=n},registerComponent:function e(t,n){if(j)return TS.error('component "'+t+'" must be registered on before dom ready');if(N[t])return TS.error('component "'+t+'" already exists');"function"===typeof n&&(n=n());if("function"!==typeof n.destroy)return TS.error('component "'+t+'" cannot be registered as it does not have a destroy method');var r=function e(){this._constructor&&this._constructor.apply(this,arguments);if(!this.id){this.id=t+"_auto_guid_"+o;o+=1}this.test&&m()?this.test=void 0:"function"===typeof this.test&&(this.test=this.test());e._add(this.id,this)};var a=f(t,r,"component");if(void 0===a){z[t]=n;return}var i=n.destroy;n.destroy=function(){r._remove(this.id);i.call(this)};r.prototype=Object.create(n);r.instances={};r._name=t;N[t]=r;r._add=function(e,n){N[t].instances[e]&&TS.warn("A "+t+" component with the instance id "+e+"already exists");N[t].instances[e]=n};r._remove=function(e){N[t].instances[e]=null};r.get=function(e){return N[t].instances[e]};r.getAll=function(){return N[t].instances}},makeLogDate:function e(){if(window.TSMakeLogDate)return TSMakeLogDate();return"(TSMakeLogDate not loaded) "},shouldLog:function e(t){return TS.console.shouldLog(t)},replaceConsoleFunction:function e(t){return TS.console.replaceConsoleFunction(t)},log:function e(t){if(TS.shouldLog(t)){var n=X(t,"log");var r=Z(t,arguments);TS.interop.console.info(n,[].slice.call(r,0))}},info:function e(){TS.interop.console.info("info",[].slice.call(arguments,0))},maybeWarn:function e(t){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function e(){TS.interop.console.warn([].slice.call(arguments,0))},dir:function e(t,n,r){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function e(t){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function e(){TS.interop.console.error([].slice.call(arguments,0))},logError:function e(t,n,r,o){TS.console.logError.apply(this,[].slice.call(arguments,0))},getQsArgsForUrl:function e(t){if(!t&&x)return x;x="";for(var n in TS.qs_args){if("export_test"===n)continue;x+="&"+n+"="+encodeURIComponent(TS.qs_args[n])}return x},getOtherAccountsCount:function e(){var t=0;if(!TS.boot_data.other_accounts)return t;t=Object.keys(TS.boot_data.other_accounts).length;return t},refreshTeams:function e(){d()},reload:function e(t,n,r){if(t){TS.info("TS.reload called: "+t);TS.generic_dialog.start({title:TS.interop.i18n.t("Reloading!","ts")(),body:t,show_cancel_button:false,esc_for_ok:true,onGo:function e(){TS.reload()}});return}n&&(n=JSON.stringify(n));TS.info("TS.reload() called: "+(n||"no reason specified"));TS.console&&TS.console.logStackTrace();window.location.reload(r)},reloadIfLoggedInAndShouldReload:function e(t){if(TS.model.ms_logged_in_once&&t.should_reload){TS.reload(null,"rtm.shouldReload said so");return true}return false},reloadIfVersionsChanged:function e(t){if(TS.model.ms_logged_in_once&&t.min_version_ts&&"dev"!==TS.boot_data.version_ts&&parseInt(TS.boot_data.version_ts,10)<parseInt(t.min_version_ts,10)){TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)");return true}if(TS.model.ms_logged_in_once&&t.cache_version&&t.cache_version!=TS.storage.msgs_version){TS.reload(null,"data.cache_version "+t.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version);return true}return false},isPartiallyBooted:function e(){return!!(TS._incremental_boot||TS._did_incremental_boot&&!TS._did_full_boot)},ensureFullyBooted:function e(){return s},maybeShowRateLimitedDialog:function e(){Q()},test:function e(){var e={_registerDelayedComponentsAndModules:R,_deleteModule:function e(t){delete TS[t];delete P[t]},_deleteComponent:function e(t){delete TS[t];delete N[t]}};return e}};delete window.TSM;var c=TS.interop.utility.addJitter(1e3,0,5);var u=TS.interop.utility.addJitter(3e5,0,1);var d=_.debounce(function(){if(!TS.boot_data)return;if(!TS.model)return;if(!TS.model.team)return;if(!TS.model.user)return;TS.interop.api.call("auth.currentSessions").then(function(e){var t=e.data;TS.boot_data.other_accounts={};for(var n in t.accounts){if(n==TS.model.user.id)continue;TS.boot_data.other_accounts[n]=t.accounts[n]}}).catch(function(e){if(TS.console&&TS.console.warn&&TS.console.error){TS.warn(8675309,"unable to do anything with refreshTeams rsp");TS.error(8675309,e)}})},c,{maxWait:u});var f=function e(t,n,r){var o=t;var a=TS;var i=o.split(".");var s=i.length-1;if(s>=3)TS.error(r+' "'+o+'" cannot be registered, as we only support a depth of two sub modules right now');else if(s){o=i[s];var l=0;for(l;l<s;l+=1){i[l]||TS.error(r+' "'+t+'" cannot be registered because of a bad name');a=a[i[l]];if(void 0===a)return a}}void 0!==a[o]?TS.error(r+' "'+t+'" cannot be registered; "'+o+'" already exists on "'+(a._name||"TS")+'"'):a[o]=n;return a};if(e){TS.raw_templates=e;e=null}if(t){TS.raw_template_paths=t;t=null}if(n){TS.templates_to_audit=n;n=null}var m=function e(){return!("undefined"!==typeof window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)};var p=function e(){var t=g();k=t;if(!y){TS.info("Starting non-incremental boot");return t}var n=y;return n.then(function(e){e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts");e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts");e.data.translations_cache_ts=_.get(TS.storage.fetchStaticTranslations(),"cache_ts");return e}).catch(function(){TS.info("Recovering from incremental boot error");k=void 0;return t}).finally(function(){y=void 0})};var g=function e(){if(TS.qs_args.no_rtm_start)return new Promise(function(t,n){TS.resumeRTMStart=function(){delete TS.resumeRTMStart;delete TS.qs_args.no_rtm_start;e().then(function(e){t(e)}).catch(n)}});if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var t=Promise.resolve({ok:true,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});delete TS.boot_data.rtm_start_response;return t}return M().then(function(e){TS.has_pri[K]&&TS.log(K,"Flannel: got rtm.start response \ud83d\udc95");return{ok:true,args:{},data:e}})};var S=function e(t){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Got rtm.start login data");TS.model.emoji_cache_ts=t.data.emoji_cache_ts;TS.model.apps_cache_ts=t.data.apps_cache_ts;TS.model.commands_cache_ts=t.data.commands_cache_ts;TS.model.static_translations_cache_ts=t.data.translations_cache_ts;if(!t.data.self){TS.error("No self?");return}if(!t.data.team){TS.error("No team?");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up model");return G(t.data,t.args).then(function(){h(t.data);TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Model did set up; setting up apps");TS.apps.setUp();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up commands");TS.cmd_handlers.setUpCmds();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up static translations");TS.i18n.setUpStaticTranslations();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up UI");T();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Finding initial channel");TS.client&&TS.client.calculateInitialCid();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji and shared channels");if(TS.model.user.is_restricted&&!TS.boot_data.feature_scg_api_filters){var e=_([t.data.mpims,t.data.ims]).flatten().map(function(e){return e.members||[e.user]}).flatten().concat(TS.model.guest_accessible_user_ids,TS.model.user.id).compact().uniq().value();var n=true;TS.members.legacySetAccessibleUserIds(e,n);TS.members.legacyMaybeFetchAccessibleUserIds()}return TS.emoji.bootEmoji().timeout(500).catch(Promise.TimeoutError,function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Fetching emoji took too long; continuing without waiting for it")}).catch(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji failed, trying to move forward anyway...")})}).then(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Nearly there! Finalizing...");TS.model.ms_logged_in_once||v(t.data);TS.client&&TS.client.onEveryLoginMS(t.data);TS.web&&TS.web.onEveryLoginMS(t.data);w();ee(t.data);var e;e=TS._did_incremental_boot?TS.model.ms_logged_in_once:!TS.model.ms_logged_in_once;if(e&&a){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Divine clementine, we are finalizing a full boot!");a();a=null;TS.interop.desktop.isDesktop&&TS.redux.dispatch(TS.interop.desktop.onWebappBooted());D&&TS.interop.console.info("BOOT","Finished first boot "+Math.ceil(performance.now()-D)+" ms after DOM ready")}TS.model.ms_logged_in_once=true;TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Holy guacamole, we\u2019re all done!");TS.log(123,"User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"));TS.boot_data.feature_failover_proxy_check&&TS.interop.failoverProxyCheck();TS.boot_data.feature_edge_upload_proxy_check&&TS.interop.edgeUploadProxyCheck()}).catch(function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided"));TS.dir(e);TS.info(e.stack);TS._last_boot_error=e})};var h=function e(t){if(parseInt(TS.storage.fetchLastEKMChangeTimestamp()||"0",10)<parseInt(t.ekm_clear_cache_ts||"0",10)){if(TS.interop.desktop.isDesktop){TS.interop.console.info("BOOT","EKM clear cache event occurred; clearing file cache");TS.interop.desktop.clearCache()}TS.interop.console.info("BOOT","Updating last_ekm_change_ts in storage to "+t.ekm_clear_cache_ts);TS.storage.storeLastEKMChangeTimestamp(t.ekm_clear_cache_ts)}};var T=function e(){TS.ui.setThemeClasses();TS.client&&TS.client.updateTeamIcon()};var v=function e(t){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_finalizeFirstBoot");if(TS.model.ms_logged_in_once){TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error.");return}if(TS.client){TS.client.onFirstLoginMS(t);if(TS.isPartiallyBooted()){b(k);TS.boot_data.feature_degraded_send||(k=void 0)}else TS.incremental_boot.afterFullBoot();TS.has_pri["1996"]=true}TS.web&&TS.web.onFirstLoginMS(t);TS.boot_data.feature_degraded_send&&(k=void 0)};var b=function e(t){TS.interop.console.info("BOOT","Finalizing incremental boot");TS.incremental_boot.beforeFullBoot();t.then(function(e){S(e);TS.incremental_boot.afterFullBoot();TS.interop.console.info("BOOT","Completed incremental boot")}).catch(function(e){TS.error("Tried to finalize incremental boot, but rtm.start failed. Will recover when we reconnect.");throw e})};var w=function e(){if(TS.isPartiallyBooted()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS not connecting to MS until we complete incremental boot");return}if(!TS.interop.Flannel.useSocket()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will not connect to MS");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wants to connect to MS");if(TS.redux.socket.isProvisionallyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will finalize SocketManager");try{TS.interop.SocketManager.finalizeProvisionalConnection();TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did finalize SocketManager")}catch(e){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS failed to finalize SocketManager");var t=true;TS.console.logError(e,"sm_finalize_failed_2",void 0,t);TS.interop.SocketManager.disconnect()}}else{TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wanted to finalize SocketManager but it had no provisional connection");if(TS.redux.socket.hasNeverConnected()){"calls"===TS.boot_data.app?TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: opening our SocketManager connection now"):TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we have never had a connection. This should not happen!");M().then(function(e){S({ok:true,args:{},data:e})})}else if(!TS.redux.socket.wasPreviouslyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we had a connection but it is gone for some reason; wait for it to come back");TS.redux.socket.provisionallyConnectedSig.addOnce(function(){return e()})}}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did connect to MS")};var y;var k;TS.qs_args=function(){var e=location.search.substring(1);var t={};var n;n=e.split("&");for(var r=0;r<n.length;r+=1){var o=n[r].indexOf("=");if(-1!=o){var a=n[r].substring(0,o);var i=n[r].substring(o+1);t[a]=unescape(i)}else n[r].length&&(t[n[r]]="")}return t}();TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri;_.each(TS.pri&&TS.pri.split(","),function(e){e&&(TS.has_pri[e]=true)});var j=false;var x;var O=function e(){TS.redux.socket.connectedSig.addOnce(function(){TS.boot_data.feature_degraded_send?TS.redux.socket.provisionallyConnectedSig.add(function(){TS.info("Successfully fetched start data; processing it");C().then(function(e){return S({ok:true,args:{},data:e})})}):TS.redux.socket.provisionallyConnectedSig.add(function(e){E(e).then(function(e){TS.info("Successfully hydrated start data from Socket Manager; processing it");S({ok:true,args:{},data:e})})})})};var E=function e(t){return t.then(function(e){TS.info("Got start data from Socket Manager; hydrating it");return TS.redux.dispatch(TS.interop.boot.data.hydrateStartData({startData:e}))})};var C=function e(){return k||TS.redux.dispatch(TS.interop.boot.data.getStartData())};var M=function e(){if(!TS.redux.socket.hasNeverConnected()){var t=new Error("_connectAndFetchStartDataWithSocketManager can only be called if Socket Manager has never connected");TS.console.logError(t,"_connectAndFetchStartDataWithSocketManager called too many times");return Promise.reject(t)}if(TS.boot_data.feature_degraded_send){A();return C()}var n=new Promise(function(e){function t(n){E(n).then(function(n){TS.redux.socket.connectedSig.addOnce(function(){TS.redux.socket.provisionallyConnectedSig.remove(t)});e(n)}).catch(function(e){TS.warn("Unable to get start data from socket");TS.logError(e)})}TS.redux.socket.provisionallyConnectedSig.add(t)});A();return n};var A=function e(){TS.has_pri["1996"]=true;TS.interop.Eventlog.createInstanceForTeam(TS.boot_data.team_id);TS.interop.SocketManager.start(TS.boot_data.api_token);if(TS.qs_args.ws_flakiness)try{var t=parseFloat(TS.qs_args.ws_flakiness);if(t>0){TS.interop.SocketManager.debugSetSocketConnectFlakiness(t);TS.interop.SocketManager.debugSetSocketSendFlakiness(t);if(1===t){TS.interop.SocketManager.disconnect();TS.redux.socket.provisionallyConnectedSig.add(TS.interop.SocketManager.disconnect);return}setInterval(function(){TS.redux.socket.isConnected()&&TS.interop.SocketManager.disconnect()},9e4)}}catch(e){}};var L=function e(t){TS.interop.Flannel.useSocket()&&O();q();j=true;TS.model.is_our_app&&H();TS.ui.setUpWindowUnloadHandlers();"client"===TS.boot_data.app?TS.client.gogogo():"web"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.web.gogogo();"client"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.interop.activity_session.listenForUserEvents();if(TS.boot_data.no_login){TS.info("running without a user");TS.web&&TS.web.no_login_complete_sig.dispatch()}else t?S(t):TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")};var F=function e(){if(!window.sessionStorage)return;try{var t=TS.client?"session_load_count_client":"session_load_count_web";var n=parseInt(sessionStorage.getItem(t)||0,10)+1;sessionStorage.setItem(t,n);TS.log(123,t+": "+n);TS.metrics.store(t,n,{is_count:true})}catch(e){TS.warn("could not log session load count: "+e)}};var I=function e(){window.devtoolsFormatters=window.devtoolsFormatters||[];window.devtoolsFormatters.push({header:function e(t){if(!t||!t._is_interop_channel_object||!window._)return null;var n=_.omitBy(_.assign({},t),_.isNil);return["object",{object:n}]},hasBody:function e(){return false}})};var P={};var B={};var N={};var z={};var D;var U=function e(){D=performance.now();TS.log(123,"_onDOMReady");F();if(window.desktop&&desktop.downloads){TS.model.supports_downloads=true;TS.model.flex_names.push("downloads")}TS.client||TS.info("no TS.client on page:"+document.location.href);soundManager.setup({debugMode:false});TS.storage.onStart();R();TS.redux.members.onStart();TS.redux.members.onStart=_.noop;TS.interop.setTeamIdForToken(TS.boot_data.api_token,TS.boot_data.team_id);if(TS.interop&&TS.interop.console&&TS.interop.console.setRedactionEnabled){var t=!TS.boot_data.feature_tinyspeck;TS.interop.console.setRedactionEnabled(t)}var n=TS.boot_data.no_login?Promise.resolve():p();var r=[W(),n];TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login&&r.push(TS.redux.enterprise.fetchAndUpsertEnterpriseOrgInfo());Promise.all(r).then(function(){n.then(L);return null})};var W=function e(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length){if(!TS.boot_data.feature_tinyspeck)return Promise.resolve();if(TS.raw_template_paths&&Object.keys(TS.raw_template_paths).length&&TS.templates_to_audit&&Object.keys(TS.templates_to_audit).length)return Promise.resolve()}var t;t=TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts?TS.boot_data.hbs_templates_version:"dev"===TS.boot_data.version_ts?Date.now():TS.boot_data.version_ts;var n="/templates.php?cb="+t+TS.getQsArgsForUrl();TS.boot_data.template_groups&&(n+="&template_groups="+TS.boot_data.template_groups);TS.boot_data.template_exclude_feature_flagged&&(n+="&template_exclude_feature_flagged=1");if(/&locale=[a-zA-Z-]/.test(n)){n=n.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"");n=n.replace(/&locale=[a-zA-Z-]/,"")}TS.interop.i18n.locale&&TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n+="&locale="+TS.interop.i18n.locale);var r=0;function o(){r+=1;return new Promise(function(e){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length){if(!TS.boot_data.feature_tinyspeck){e();return}if(TS.raw_template_paths&&Object.keys(TS.raw_template_paths).length&&TS.templates_to_audit&&Object.keys(TS.templates_to_audit).length){e();return}}TS.utility.getCachedScript(n).done(function(){if(0==Object.keys(TS.raw_templates).length){TS.error(n+" returned no templates D:");return}e()}).fail(function(e,t,a){var i=Math.min(1e3*r,1e4);TS.warn("loading "+n+" failed (textStatus:"+t+" errorThrown:"+a+" attempts:"+r+"), trying again in "+i+"ms");setTimeout(o,i)})})}return o()};var R=function e(){_.sortBy(Object.keys(B),"length").forEach(function(e){TS.registerModule(e,B[e],true)});_.sortBy(Object.keys(z),"length").forEach(function(e){TS.registerComponent(e,z[e],true)})};var q=function e(){TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()");if("client"===TS.boot_data.app){TS.client.onStart();TS.client.onStart=_.noop}else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app){TS.web.onStart();TS.web.onStart=_.noop}else{if("test"===TS.boot_data.app)return;if("api"!==TS.boot_data.app&&"oauth"!==TS.boot_data.app){TS.error("WTF app? "+TS.boot_data.app);return}}var t;var n=!TS.qs_args.keep_onstart;try{_.forOwn(P,function(e){if(!e.onStart)return;t=e._name;e.onStart();n&&(e.onStart=_.noop)})}catch(e){TS.error("TS."+t+".onStart encountered an error:");TS.logError(e);window.TSBeacon&&window.TSBeacon("call_onstarts_error",1);throw e}n&&(q=_.noop)};var G=function e(t,n){return new Promise(function(e,r){var o=!TS.model.ms_logged_in_once;t.team.activity=[];t.team.url=t.url;if(t.team.prefs){TS.redux.prefs.setTeamPrefs(t.team.prefs);delete t.team.prefs}TS.redux.teams.upsertTeam(t.team);TS.members.legacyUpsertAndSignal(l()({},t.self,{is_self:true}));TS.boot_data.page_needs_enterprise&&void 0!==t.can_manage_shared_channels&&TS.prefs.setTeamPrefLocal("can_user_manage_shared_channels",t.can_manage_shared_channels);TS.model.last_team_name||(TS.model.last_team_name=TS.model.team.name);if(o){TS.model.read_only_channels=[];if(TS.boot_data.feature_default_shared_channels){TS.model.thread_only_channels=[];TS.model.non_threadable_channels=[]}}else{var a=TS._did_incremental_boot&&!TS._did_full_boot;a||TS.refreshTeams()}TS.prefs.setPrefs(t.prefs||t.self.prefs);t.self.prefs&&delete t.self.prefs;var s;var c;var u;var d=["args.cache_ts:"+n.cache_ts];var f=_.clone(n);f.token&&(f.token="REDACTED");try{d.push("api args: "+JSON.stringify(f))}catch(e){d.push("api args: "+f)}TS.members.legacyStartBatchUpsert();var m=t.users||[];var p=t.bots||[];var g={};if(!TS._did_incremental_boot||TS._incremental_boot||TS._did_full_boot)for(s=0;s<m.length;s+=1)g[m[s].id]=true;else;for(s=0;s<m.length;s+=1){c=TS.members.legacyUpsertAndSignal(m[s]);u=c.member;TS.has_pri[J]&&TS.log(J,"upsert from DATA: "+u.id+" "+c.status)}var S={};for(s=0;s<p.length;s+=1)S[p[s].id]=true;TS.redux.bots.bulkUpsertBots(p);d.push("members from updated_users in rtm.start:"+m.length+" (slackbot will always be here)");d.push("bots from updated_bots in rtm.start:"+p.length);m.length<TS.model.members.length/20&&(TS.model.did_we_load_with_user_cache=true);var h;TS.qs_args.debug_slackbot&&(h=true);h&&TS.info("debug_slackbot: _setUpModel(): data_user_list, data_bot_list",m,p);S=null;g=null;TS.log(123,d.join("\n"));if(!TS.model.user){TS.error("No TS.model.user - Expected user with id: "+_.get(t,"self.id","#"));TS.log(d.join("\n"));r(Error("No TS.model.user"));return}TS.members.legacyFinishBatchUpsert();TS.prefs.setHighlightWords(TS.prefs.getPref("highlight_words"));if(t.subteams)if(TS.boot_data.feature_lazy_user_groups){TS.interop.userGroups.clearAllUserGroupMembership();TS.interop.userGroups.bulkAddUserGroupMembership({userGroups:[].concat(i()(t.subteams.self)),isMember:true})}else{TS.user_groups.legacyStartBatchUpsert();TS.interop.userGroups.upsertUserGroups(t.subteams.all);TS.user_groups.legacyFinishBatchUpsert();t.subteams.self.forEach(function(e){TS.interop.userGroups.upsertSelfUserGroup(e)})}h&&TS.info("debug_slackbot: _setUpModel(): data.ims",t.ims);t.read_only_channels&&(TS.model.read_only_channels=t.read_only_channels);TS.boot_data.feature_default_shared_channels&&t.non_threadable_channels&&(TS.model.non_threadable_channels=t.non_threadable_channels);TS.boot_data.feature_default_shared_channels&&t.thread_only_channels&&(TS.model.thread_only_channels=t.thread_only_channels);TS.model.initial_msgs_cnt=42;if(TS.qs_args.api_count){var T=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,T)}var v=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(v,2*TS.model.initial_msgs_cnt);TS.model.special_initial_msgs_cnt=Math.min(v,2*TS.model.initial_msgs_cnt);TS.log(123,"initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);var b=function e(){var n=1==TS.qs_args.just_general;TS.utility.msgs.startBatchUnreadCalc();TS.metrics.mark("upsert_channels_start");var r=_.map(t.channels,function(e){if(n&&!e.is_general)return;var r=false;var o=false;var a=false;t.read_only_channels&&(r=t.read_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&t.thread_only_channels&&(o=t.thread_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&t.non_threadable_channels&&(a=t.non_threadable_channels.indexOf(e.id)>-1);return l()({},e,{is_read_only:r,is_thread_only:o,is_non_threadable:a})});TS.metrics.measureAndClear("upsert_channels","upsert_channels_start");h&&TS.info("debug_slackbot: completeModelObSetup(): data.ims",t.ims);var o=_.map(t.ims,function(e){if(n&&"USLACKBOT"!==e.user)return;return e});TS.metrics.mark("upsert_groups_start");var a=_.map(t.groups,function(e){if(n)return;var r=false;var o=false;var a=false;t.read_only_channels&&(r=t.read_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&t.thread_only_channels&&(o=t.thread_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&t.non_threadable_channels&&(a=t.non_threadable_channels.indexOf(e.id)>-1);return l()({},e,{is_read_only:r,is_thread_only:o,is_non_threadable:a})});TS.metrics.measureAndClear("upsert_groups","upsert_groups_start");if(t.mpims){h&&TS.info("debug_slackbot: completeModelObSetup(): data.mpims",t.mpims);var i=_.map(t.mpims,function(e){if(n)return;return e})}var s=_.compact(r.concat(o).concat(a).concat(i));TS.redux.channels.bulkAddEntities(s);if(!TS.isPartiallyBooted()&&!TS.boot_data.feature_degraded_send){var c=false;_.differenceBy(TS.interop.channels.getUnarchivedPublicAndPrivateChannelsUserIsIn(),t.groups,t.channels,"id").forEach(function(e){TS.interop.rules.channels.isPrivateChannel(e)?TS.interop.channels.removeChannels({ids:[e.id]}):TS.interop.channels.leaveChannel(e);TS.channels.left_sig.dispatch(e);c=true});c&&TS.members.invalidateMembersUserCanSeeArrayCaches()}TS.interop&&TS.interop.ChannelSidebar&&TS.interop.ChannelSidebar.ensureRowInView();TS.utility.msgs.finishBatchUnreadCalc();TS.model.user.is_restricted&&!TS._incremental_boot&&TS._did_incremental_boot&&TS.members.invalidateMembersUserCanSeeArrayCaches();if(h){var u=TS.redux.channels.getImByMemberId("USLACKBOT");var d=TS.interop.members.getMemberById("USLACKBOT");TS.info("debug_slackbot: "+(TS._incremental_boot?"incremental boot":"non-incremental boot")+"\nTS.redux.channels.getImByMemberId('USLACKBOT') => "+(u?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b")+"\nTS.interop.members.getMemberById('USLACKBOT') => "+(d?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b"));u&&TS.info("debug_slackbot: slackbot_im",u.toJSON&&u.toJSON()||u);d&&TS.info("debug_slackbot: slackbot_member",d.toJSON&&d.toJSON()||d);TS._incremental_boot||u||TS.warn("debug_slackbot: TS.redux.channels.getImByMemberId(`USLACKBOT`): No IM found?")}};if(t.dnd){t.dnd.dnd_enabled?TS.redux.dnd.updateDndScheduleForMember(t.self.id,t.dnd.next_dnd_start_ts,t.dnd.next_dnd_end_ts):TS.redux.dnd.updateDndScheduleForMember(t.self.id,null,null);(t.dnd.snooze_enabled||t.dnd.snooze_endtime)&&TS.redux.dnd.updateSnoozeScheduleForCurrentMember(t.dnd.snooze_enabled,t.dnd.snooze_endtime)}b();TS.redux.dispatch(TS.interop.redux.models.paidFeatures.setPaidFeatures(t.paid_features||[]));e()})};var V=function e(t){if(t.test&&!t.__esModule&&m())delete t.test;else if("function"===typeof t.test){var n=t.test;Object.defineProperty(t,"test",{get:n})}};V(TS);var H=function e(){var t=false;var n=function e(){TS.info("sleep event!");t=true;TS.web&&TS.web.space&&TS.ds.sleep()};var r=function e(){if(!t)return;t=false;TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms);TS.web&&TS.web.space&&TS.ds.wake()};window.addEventListener("sleep",n,false);window.addEventListener("wake",r,false)};var K=1989;var J=481;var Y;var Q=function e(){if(TS.boot_data.feature_degraded_send)return;if(Y)return;Y=true;TS.metrics.count("rate_limit_dialog_shown");var t=TS.interop.i18n.t("Bear with us","ts")();var n=TS.interop.i18n.t("Dismiss","ts")();var r=TS.interop.i18n.t("Lots of your teammates are connecting to Slack right now, so it\u2019s taking longer than usual. We\u2019re really sorry about this, and we\u2019ll have you online soon.","ts")();var o=TS.generic_dialog.alert(r,t,n);var a=function e(){o.isPending()&&TS.generic_dialog.cancel();Y=false};TS.redux.socket.connectedSig.addOnce(a)};var X=function e(t,n){var r=n;t&&_.isNumber(t)?r=""+t:"log"===n&&(r="info");return r};var Z=function e(t,n){var r=Array.prototype.slice.call(n);t&&_.isNumber(t)&&r.shift();return r};var ee=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n=t.channels,r=t.ims,o=t.mpims,a=t.groups,i=t.self,s=t.team;var l=_([n,r,o,a]).flatten().map("id").value();var c=[i.id];var u=[s.id];TS.interop.channels.markObjectsAsFresh(l);TS.interop.members.markObjectsAsFresh(c);TS.interop.teams.markObjectsAsFresh(u)};_.noop()})();var c=n(3077);var u=n(3078);var d=n(3079);var f=n(3080);var m=n(2315);var p=n(3081);var g=n(3082);var S=n(2486);var h=n(3083);var T=n(3084);var v=n(3085)},40:function(e,t,n){"use strict";t.__esModule=true;var r=n(275);var o=l(r);var a=n(288);var i=l(a);var s="function"===typeof i.default&&"symbol"===typeof o.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function l(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===s(o.default)?function(e){return"undefined"===typeof e?"undefined":s(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":s(e)}},412:function(e,t,n){e.exports={default:n(434),__esModule:true}},43:function(e,t,n){var r=n(109)("wks");var o=n(91);var a=n(46).Symbol;var i="function"==typeof a;var s=e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))};s.store=r},434:function(e,t,n){n(125);n(435);e.exports=n(52).Array.from},435:function(e,t,n){"use strict";var r=n(146);var o=n(86);var a=n(120);var i=n(436);var s=n(437);var l=n(154);var c=n(438);var _=n(215);o(o.S+o.F*!n(439)(function(e){Array.from(e)}),"Array",{from:function e(t){var n=a(t);var o="function"==typeof this?this:Array;var u=arguments.length;var d=u>1?arguments[1]:void 0;var f=void 0!==d;var m=0;var p=_(n);var g,S,h,T;f&&(d=r(d,u>2?arguments[2]:void 0,2));if(void 0==p||o==Array&&s(p)){g=l(n.length);for(S=new o(g);g>m;m++)c(S,m,f?d(n[m],m):n[m])}else for(T=p.call(n),S=new o;!(h=T.next()).done;m++)c(S,m,f?i(T,d,[h.value,m],true):h.value);S.length=m;return S}})},436:function(e,t,n){var r=n(71);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var a=e["return"];void 0!==a&&r(a.call(e));throw t}}},437:function(e,t,n){var r=n(80);var o=n(43)("iterator");var a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},438:function(e,t,n){"use strict";var r=n(58);var o=n(83);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},439:function(e,t,n){var r=n(43)("iterator");var o=false;try{var a=[7][r]();a["return"]=function(){o=true};Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return false;var n=false;try{var a=[7];var i=a[r]();i.next=function(){return{done:n=true}};a[r]=function(){return i};e(a)}catch(e){}return n}},46:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},52:function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},56:function(e,t,n){e.exports=!n(73)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},58:function(e,t,n){var r=n(71);var o=n(136);var a=n(115);var i=Object.defineProperty;t.f=n(56)?Object.defineProperty:function e(t,n,s){r(t);n=a(n,true);r(s);if(o)try{return i(t,n,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");"value"in s&&(t[n]=s.value);return t}},60:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},64:function(e,t,n){var r=n(58);var o=n(83);e.exports=n(56)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){e[t]=n;return e}},66:function(e,t,n){var r=n(133);var o=n(96);e.exports=function(e){return r(o(e))}},68:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},71:function(e,t,n){var r=n(68);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},73:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},80:function(e,t){e.exports={}},83:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86:function(e,t,n){var r=n(46);var o=n(52);var a=n(146);var i=n(64);var s="prototype";var l=function(e,t,n){var c=e&l.F;var _=e&l.G;var u=e&l.S;var d=e&l.P;var f=e&l.B;var m=e&l.W;var p=_?o:o[t]||(o[t]={});var g=p[s];var S=_?r:u?r[t]:(r[t]||{})[s];var h,T,v;_&&(n=t);for(h in n){T=!c&&S&&void 0!==S[h];if(T&&h in p)continue;v=T?S[h]:n[h];p[h]=_&&"function"!=typeof S[h]?n[h]:f&&T?a(v,r):m&&S[h]==v?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};t[s]=e[s];return t}(v):d&&"function"==typeof v?a(Function.call,v):v;if(d){(p.virtual||(p.virtual={}))[h]=v;e&l.R&&g&&!g[h]&&i(g,h,v)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},91:function(e,t){var n=0;var r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},95:function(e,t){var n=Math.ceil;var r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},96:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},98:function(e,t,n){var r=n(137);var o=n(110);e.exports=Object.keys||function e(t){return r(t,o)}}},[[3693,0]]]);